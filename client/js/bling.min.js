(function(){var $,Bling,extend,slice=[].slice,extend1=function(t,n){function e(){this.constructor=t}for(var r in n)hasProp.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};Object.keys||(Object.keys=function(t){var n,e;e=[];for(n in t)e.push(n);return e}),Object.values||(Object.values=function(t){var n,e;e=[];for(n in t)e.push(t[n]);return e}),extend=function(){var t,n,e,r,i,u,o;for(t=arguments[0],e=2<=arguments.length?slice.call(arguments,1):[],n=0,i=e.length;i>n;n++)if(u=e[n])for(r in u)o=u[r],t[r]=o;return t},Bling=function(t){"Bling:nomunge";function Bling(){var t,n,e;if(t=1<=arguments.length?slice.call(arguments,0):[],1===t.length&&(t=$.type.lookup(t[0]).array(t[0])),n=$.inherit(Bling,t),0===t.length&&void 0!==t[0]){for(e=0;void 0!==t[e];)e++;n.length=e}return"init"in Bling?Bling.init(n):n}return extend1(Bling,t),Bling}(Array),$=Bling,$.global=function(){return this}(),$.plugin=function(t,n){var e,r,i,u,o,s,a;if(n||(n=t,t={}),e=this,"depends"in t)return e.depends(t.depends,function(){return e.plugin({provides:t.provides},n)});try{if("object"==typeof(o=null!=n?n.call(e,e):void 0)){extend(this,o.$),delete o.$,extend(e.prototype,o),i=function(t){return e[t]||(e[t]=function(){var n;return n=1<=arguments.length?slice.call(arguments,0):[],e.prototype[t].apply($(n[0]),n.slice(1))})};for(u in o)i(u);null!=t.provides&&e.provide(t.provides)}}catch(t){r=t,console.error("plugin failed '"+e.name+"':",(null!=(s=null!=(a=$.debugStack)?a:$.identity)?s:function(t){return t})(r.stack))}return this},extend($,function(){var t,n,e,r,i;return i=[],n={},t=/, */,r=function(t){return!(t in n)},e=function(n){return("string"==typeof n?n.split(t):n).filter(r)},{depends:function(t,n){return 0===(t=e(t)).length?n():i.push(function(e){var r;return(r=t.indexOf(e))>-1&&t.splice(r,1),0===t.length&&n}),n},provide:function(t,r){var u,o,s,a,c,l,f,h,p,d;for(o=[],h=e(t),u=0,l=h.length;l>u;u++)for(f=h[u],n[f]=c=-1;++c<i.length;)if(a=i[c](f)){i.splice(c,1);try{a(r)}catch(t){s=t,o.push(s)}c=-1}return o.length>0&&(a=null!=(p=null!=(d=$.debugStack)?d:$.identity)?p:function(t){return t.stack},o.map(a).forEach(console.error.bind(console))),r}}}()),$.plugin({depends:"core",provides:"async,series,parallel"},function(){return{series:function(t){var n,e,r,i,u;return null==t&&(t=$.identity),i=$(),u=this.length,u>0?(n=0,e=function(e){return function(){return i[e]=arguments,++n>=u?t.apply(i,i):r(n),null}},(r=function(t){return function(n){return $.immediate(function(){return t[n](e(n))})}}(this))(0)):t.apply(i,i),this},parallel:function(t){var n,e,r,i,u,o,s;if(null==t&&(t=$.identity),o=$(),s=this.length,s>0)for(e=0,r=function(n){return function(){return o[n]=arguments,++e>=s&&t.apply(o,o),null}},i=n=0,u=s;u>n;i=n+=1)this[i](r(i));else t.apply(o,o);return this}}}),$.plugin({provides:"cache, Cache",depends:"core, sortBy, logger"},function(){var t;return t=function(){function t(t,n){var e,r,i,u,o,s,a;this.capacity=null!=t?t:1e3,this.defaultTtl=null!=n?n:1/0,this.capacity=Math.max(0,this.capacity),this.evictCount=Math.max(3,Math.floor(.1*this.capacity)),i=Object.create(null),o=[],r=function(t){return-t.r/t.w},e=function(t){return function(){var n;if(t.capacity>0){if(o.length>=t.capacity)for(;o.length+t.evictCount-1>=t.capacity;)delete i[n=o.pop().k];return null}}}(this),s=function(t,n){var e,r,u,s;for(s=e=r=t,u=n;u>=r?u>=e:e>=u;s=u>=r?++e:--e)s>=0&&s<o.length&&(i[o[s].k]=s);return null},a=function(t){var n,e;return e=o[t],n=$.sortedIndex(o,e,r),n!==t&&(o.splice(t,1),o.splice(n,0,e),s(t,n)),null},u={v:void 0},$.extend(this,{has:function(t){return t in i},del:function(t){var n;return t in i?(n=i[t],o.splice(n,1),delete i[t],s(n,o.length-1)):void 0},set:function(t){return function(n,u,c){var l,f,h;return null==c&&(c=t.defaultTtl),t.capacity>0?(n in i?(l=o[f=i[n]],l.v=u,l.w+=1,a(f)):(e(),h={k:n,v:u,r:0,w:1},f=$.sortedIndex(o,h,r),o.splice(f,0,h),s(f,o.length-1)),1/0>c&&$.delay(c,function(){return t.del(n)}),u):u}}(this),get:function(t){var n,e;return e=u,t in i&&(n=i[t],e=o[n],e.r+=1,a(n)),e.v},clear:function(){var t;for(t in i)o[i[t]]=null;return i=Object.create(null),o=[]}})}var n;return n=$.logger("[LRU]"),t}(),{$:{Cache:$.extend(t,new t(1e4))}}}),$.plugin({provides:"cartesian"},function(){return{$:{cartesian:function(){var t,n,e,r;return r=1<=arguments.length?slice.call(arguments,0):[],n=r.length,e=[],t=function(i,u){var o,s,a,c;if(++u>=n)return e.push(i);for(a=r[u],o=0,s=a.length;s>o;o++)c=a[o],t(i.concat(c),u);return null},t([],-1),$(e)}}}}),$.plugin({provides:"clone",depends:"type"},function(){return $.type.extend({unknown:{clone:function(t){return null}},string:{clone:function(t){return t+""}},number:{clone:function(t){return t+0}},array:{clone:function(t){return t.concat([])}},bling:{clone:function(t){return t.concat([])}},object:{clone:function(t){var n,e,r;e=Object.create(t.__proto__);for(n in t)hasProp.call(t,n)&&(r=t[n],e[n]=$.type.lookup(r).clone(r));return e}}}),{$:{clone:function(t){return $.type.lookup(t).clone(t)}}}}),$.plugin({provides:"compat,trimLeft,split,lastIndexOf,join,preventAll,matchesSelector,isBuffer,Map"},function(){var t,n,e,r,i,u,o,s;return(n=$.global).Buffer||(n.Buffer={isBuffer:function(){return!1}}),(e=$.global).Map||(e.Map=t=function(){function t(t){var n,e,r,i,u;e=Object.create(null),$.extend(this,{size:0,keys:function(){return Object.keys(e)},values:function(){var t,n,r;n=[];for(t in e)r=e[t],n.push(r);return n},entries:function(){var t,n,r;n=[];for(t in e)r=e[t],n.push([t,r]);return n},has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){return t in e||(this.size+=1),e[t]=n,this},delete:function(t){return t in e&&(this.size-=1),delete e[t],this},clear:function(){return e=Object.create(null),this.size=0,this},forEach:function(t,n){var r,i;for(r in e)i=e[r],t.call(n,r,i);return this}}),u=null!=t?t:[];for(n=0,i=u.length;i>n;n++)r=u[n],this.set.apply(this,r)}return t}()),s=[-1,1],Math.sign=function(t){return s[0+(t>=0)]},(r=String.prototype).trimLeft||(r.trimLeft=function(){return this.replace(/^\s+/,"")}),(i=String.prototype).split||(i.split=function(t){var n,e,r;for(n=[],e=0;(r=this.indexOf(t,e))>-1;)n.push(this.substring(e,r)),e=r+1;return n}),(u=String.prototype).lastIndexOf||(u.lastIndexOf=function(t,n,e){var r;for(null==e&&(e=-1),r=-1;(e=t.indexOf(n,e+1))>-1;)r=e;return r}),(o=Array.prototype).join||(o.join=function(t){var n,e;if(null==t&&(t=""),n=this.length,0===n)return"";for(e=this[n-1];--n>0;)e=this[n-1]+t+e;return e}),"undefined"!=typeof Event&&null!==Event&&(Event.prototype.preventAll=function(){return this.preventDefault(),this.stopPropagation(),this.cancelBubble=!0}),"undefined"!=typeof Element&&null!==Element&&(Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector),{}}),$.plugin({provides:"config",depends:"core"},function(){var t,n,e,r;return t=function(t,n){var e;switch(arguments.length){case 0:return $.extend({},process.env);default:return null!=(e=process.env[t])?e:n}},e=function(t,n){switch(arguments.length){case 1:return $.extend(process.env,arguments[0]);case 2:return process.env[t]=n}},n=function(t){var n;return n={},$(t.toString("utf8").split("\n")).filter($.isEmpty,!1).filter(/^#/,!1).map(function(){return this.replace(/^\s+/,"").split("=")}).each(function(t){var e;return(null!=(e=t[0])?e.length:void 0)?n[t[0]]=t[1].replace(/^["']/,"").replace(/['"]$/,""):void 0}),n},r=function(t,n){var e;return e=process.env[t],$.interval(1003,function(){var r;return(r=process.env[t])!==e?(n(e,r),e=r):void 0})},{$:{config:$.extend(t,{get:t,set:e,parse:n,watch:r})}}}),$.plugin({provides:"core,eq,each,map,filterMap,tap,replaceWith,reduce,union,intersect,distinct,contains,count,coalesce,swap,shuffle,select,or,zap,clean,take,skip,first,last,slice,push,filter,matches,weave,fold,flatten,call,apply,log,toArray,clear,indexWhere",depends:"string,type"},function(){var t;return $.defineProperty($,"now",{get:function(){return+new Date}}),t=function(t,n){for(;0>t;)t+=n.length;return Math.min(t,n.length)},{$:{assert:function(t,n){if(null==n&&(n=""),!t)throw new Error("assertion failed: "+n)},coalesce:function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],$(t).coalesce()},keysOf:function(t,n){var e;return null==n&&(n=!1),$(n?function(){var n;n=[];for(e in t)hasProp.call(t,e)&&n.push(e);return n}():function(){var n;n=[];for(e in t)n.push(e);return n}())},valuesOf:function(t,n){return null==n&&(n=!1),$.keysOf(t,n).map(function(n){var e;try{return t[n]}catch(t){return e=t}})}},eq:function(n){return $([this[t(n,this)]])},each:function(t){var n,e,r;for(n=0,e=this.length;e>n;n++)r=this[n],t.call(r,r);return this},map:function(t){var n,e,r,i,u;for(e=$(),r=0,n=0,i=this.length;i>n;n++)u=this[n],e[r++]=t.call(u,u);return e},every:function(t){var n,e,r;for(n=0,e=this.length;e>n;n++)if(r=this[n],!t.call(r,r))return!1;return!0},some:function(t){var n,e,r;for(n=0,e=this.length;e>n;n++)if(r=this[n],t.call(r,r))return!0;return!1},filterMap:function(t){var n,e,r,i,u;for(e=$(),n=0,r=this.length;r>n;n++)i=this[n],u=t.call(i,i),null!=u&&e.push(u);return e},tap:function(t){return t.call(this,this)},replaceWith:function(t){var n,e,r;for(this.clear(),n=0,e=t.length;e>n;n++)r=t[n],this.push(r);return this},reduce:function(t,n){var e,r,i,u,o,s,a;for("function"==typeof n&&(u=[n,t],t=u[0],n=u[1]),r=0,i=this.length,null==n&&(n=this[r++]),a=e=o=r,s=i;s>e;a=e+=1)n=t.call(this[a],n,this[a]);return n},union:function(t,n){var e,r,i,u,o,s;for(null==n&&(n=!0),o=$(),e=0,i=this.length;i>e;e++)s=this[e],o.contains(s,n)||o.push(s);for(r=0,u=t.length;u>r;r++)s=t[r],o.contains(s,n)||o.push(s);return o},distinct:function(t){return null==t&&(t=!0),this.union(this,t)},intersect:function(t){var n;return $(function(){var e,r,i;for(i=[],e=0,r=this.length;r>e;e++)n=this[e],indexOf.call(t,n)>=0&&i.push(n);return i}.call(this))},contains:function(t,n){var e,r,i;if(null==n&&(n=!0),n)return this.indexOf(t)>-1;for(e=0,r=this.length;r>e;e++)if(i=this[e],i==t)return!0;return!1},count:function(t,n){var e,r,i,u;for(null==n&&(n=!0),i=0,e=0,r=this.length;r>e;e++)u=this[e],(void 0===t||n&&u===t||!n&&u==t)&&++i;return i},coalesce:function(){var t,n,e;for(t=0,e=this.length;e>t;t++)if(n=this[t],$.type.in("array","bling",n)&&(n=$(n).coalesce()),null!=n)return n;return null},swap:function(n,e){var r;return n=t(n,this),e=t(e,this),n!==e&&(r=[this[e],this[n]],this[n]=r[0],this[e]=r[1]),this},shuffle:function(){var t;for(t=this.length-1;t>=0;)this.swap(--t,Math.floor(Math.random()*t));return this},select:function(){var t,n,e;return t=function(t){return function(){var n;return $.is("function",n=this[t])&&"constructor"!==t?$.bound(this,n):n}},e=function(e){var r,i;switch(i=$.type(e)){case"regexp":return n.call(this,e);case"string":case"number":return e=String(e),"*"===e?this.flatten():(r=e.indexOf("."))>-1?this.select(e.substr(0,r)).select(e.substr(r+1)):this.map(t(e));default:return $()}},n=function(){var t,n,e,r,i,u,o,s,a,c,l;for(t=1<=arguments.length?slice.call(arguments,0):[],a=this.length,o=Object.create(null),n=0,i=t.length;i>n;n++)if(c=t[n],$.is("regexp",c))for(l=$.keysOf(this[0]).filter(c),e=0,u=l.length;u>e;e++)s=l[e],o[s]=this.select(s);else o[c]=this.select(c);return r=0,this.map(function(){var t,n,e;n=Object.create(null);for(c in o)t=c.split(".").pop(),e=o[c][r],void 0!==e&&(n[t]=e);return r++,n})},function(){switch(arguments.length){case 0:return this;case 1:return e.apply(this,arguments);default:return n.apply(this,arguments)}}}(),or:function(t){var n,e,r;for(e=n=0,r=this.length;r>=0?r>n:n>r;e=r>=0?++n:--n)this[e]||(this[e]=t);return this},zap:function(t,n){var e,r,i,u;if($.is("object",t)){for(i in t)n=t[i],this.zap(i,n);return this}if(r=t.lastIndexOf("."),r>0)return e=t.substr(0,r),u=t.substr(r+1),this.select(e).zap(u,n),this;switch($.type(n)){case"array":case"bling":this.each(function(){return this[t]=n[++r%n.length]});break;case"function":this.zap(t,this.select(t).map(n));break;default:this.each(function(){return this[t]=n})}return this},clean:function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.each(function(){var n,e,r,i,u,o,s;for(n=0,i=t.length;i>n;n++)switch(o=t[n],$.type(o)){case"string":case"number":delete this[o];break;case"regexp":for(s=Object.keys(this),e=0,u=s.length;u>e;e++)r=s[e],o.test(r)&&delete this[r]}return null})},take:function(t){var n,e;return null==t&&(t=1),n=Math.min(t,this.length),$(function(){var t,r,i;for(i=[],e=t=0,r=n;r>t;e=t+=1)i.push(this[e]);return i}.call(this))},skip:function(t){var n,e;return null==t&&(t=0),e=Math.max(0,0|t),$(function(){var t,r,i,u;for(u=[],n=t=r=e,i=this.length;i>t;n=t+=1)u.push(this[n]);return u}.call(this))},first:function(t){return null==t&&(t=1),1===t?this[0]:this.take(t)},last:function(t){return null==t&&(t=1),1===t?this[this.length-1]:this.skip(this.length-t)},slice:function(n,e){var r;return null==n&&(n=0),null==e&&(e=this.length),n=t(n,this),e=t(e,this),$(function(){var t,i,u,o;for(o=[],r=t=i=n,u=e;u>=i?u>t:t>u;r=u>=i?++t:--t)o.push(this[r]);return o}.call(this))},extend:function(t){var n,e,r;for(n=0,r=t.length;r>n;n++)e=t[n],this.push(e);return this},push:function(t){return Array.prototype.push.call(this,t),this},filter:function(t,n,e){var r,i,u,o,s,a,c;for($.is("bool",n)&&(a=[n,e],e=a[0],n=a[1]),$.is("number",e)&&(c=[e,n],n=c[0],e=c[1]),null==n&&(n=this.length),null==e&&(e=!0),u=function(){switch(!1){case!$.is("object",t):return function(n){return $.matches(t,n)};case!$.is("string",t):return function(n){var e;return null!=(e=null!=n&&"function"==typeof n.matchesSelector?n.matchesSelector(t):void 0)?e:!1};case!$.is("regexp",t):return function(n){return t.test(n)};case!$.is("function",t):return t;case!$.type.in("bool","number","null","undefined",t):return function(n){return t===n};default:throw new Error("unsupported argument to filter: "+$.type(t))}}(),r=$(),i=0,s=this.length;s>i;i++)if(o=this[i],!!u.call(o,o)===e){if(--n<0)break;r.push(o)}return r},matches:function(t){switch(!1){case!$.is("string",t):return this.select("matchesSelector").call(t);case!$.is("regexp",t):return this.map(function(n){return t.test(n)});default:throw new Error("unsupported argument to matches: "+$.type(t))}},weave:function(t){var n,e,r,i,u,o;for(r=$(),i=n=u=this.length-1;n>=0;i=n+=-1)r[2*i+1]=this[i];for(i=e=0,o=t.length;o>e;i=e+=1)r[2*i]=t[i];return r},fold:function(t){var n,e,r;return r=this.length,n=$(function(){var n,i,u;for(u=[],e=n=0,i=r-1;i>n;e=n+=2)u.push(t.call(this,this[e],this[e+1]));return u}.call(this)),r%2===1&&n.push(t.call(this,this[r-1],void 0)),n},flatten:function(){var t,n,e,r,i,u,o,s;for(e=$(),r=t=0,o=this.length;o>t;r=++t)if(i=this[r],$.type.in("array","bling","arguments","nodelist",i))for(n=0,s=i.length;s>n;n++)u=i[n],e.push(u);else e.push(i);return e},call:function(){return this.apply(null,arguments)},apply:function(t,n){return this.filterMap(function(){return $.is("function",this)?this.apply(t,n):null})},log:function(t){return t?$.log(t,this.toString(),this.length+" items"):$.log(this.toString(),this.length+" items"),this},toArray:function(){return this.__proto__=Array.prototype,this},clear:function(){return this.splice(0,this.length)},indexWhere:function(t){var n,e,r,i;for(e=n=0,r=this.length;r>n;e=++n)if(i=this[e],t.call(i,i))return e;return-1}}}),$.plugin({provides:"css,CSS",depends:"type"},function(){var t,n,e,r,i,u;return n=function(t,e,r){var i,u,o;e in r||(r[e]=[]);for(i in t)switch(o=t[i],typeof o){case"string":case"number":u=i.replace(/([a-z]+)([A-Z]+)/g,"$1-$2").toLowerCase(),r[e].push(u+": "+o+";");break;case"object":u=e?e+i:i,n(o,u,r);break;default:throw new Error("unexpected type in css: "+typeof o)}return r},u=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},i=function(t){for(var n,e;(n=t.indexOf("/*"))>-1&&-1!==(e=t.indexOf("*/",n));)t=t.substring(0,n)+t.substring(e+2);return t},e=function(t,n){var r,i,o,s,a,c,l,f,h,p;if(c=t.match(/([^{]+){/)){if(h=u(c[1]),l=t.substring(c[0].length),n[h]||(n[h]={}),c=l.match(/([^}]+)}/))for(i=c[1].split(";"),l=l.substring(c[0].length),r=0,a=i.length;a>r;r++)f=i[r],o=f.indexOf(":"),(s=f.substring(0,o))&&(s=u(s),p=u(f.substring(o+1)),n[h][s]=p);if(l.length>0)return e(l,n)}return n},r=">+~",t=function(t){var n,e,i,u,o,s,a,c,l,f,h,p,d;h={};for(d in t){for(p=t[d],n=0,o=r.length;o>n;n++)a=r[n],d=d.replace(a," "+a+" ");switch(l=d.split(/\s+/),l.length){case 0:continue;case 1:$.extend(h[d]||(h[d]={}),p);break;default:for(i=h,u=!0,e=0,s=l.length;s>e;e++)c=l[e],u||(c=" "+c),i=i[c]||(i[c]={}),u=!1;$.extend(i,p)}}return(f=function(t){var n,e,r,i;e=!1;for(n in t)if(i=t[n],$.is("object",i)){switch(r=Object.keys(i),r.length){case 0:delete t[n];break;default:1===r.length&&$.is("object",i[r[0]])&&(t[n+r[0]]=i[r[0]],delete t[n],f(t))}f(i)}return t})(h)},{$:{CSS:{parse:function(n,r){var u;return null==r&&(r=!1),u=e(i(n),{}),r?t(u):u},stringify:function(t){var e,r;return function(){var i,u;i=n(t,"",{}),u=[];for(e in i)r=i[e],r.length>0&&u.push(e+" { "+r.join(" ")+" }");return u}().join(" ")}}}}}),$.plugin({provides:"date,midnight,stamp,unstamp,dateFormat,dateParse",depends:"type"},function(){var t,n,e,r,i,u,o,s,a,c,l,f,h,p,d,g,m,v;return d=[1,1e3,6e4,36e5,864e5],c=d[0],g=d[1],a=d[2],o=d[3],n=d[4],v={ms:c,s:g,m:a,h:o,d:n,sec:g,second:g,seconds:g,min:a,minute:a,minutes:a,hr:o,hour:o,hours:o,day:n,days:n},m=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],u={yyyy:Date.prototype.getUTCFullYear,YY:e=function(){return String(this.getUTCFullYear()).substr(2)},yy:e,mm:function(){return this.getUTCMonth()+1},dd:Date.prototype.getUTCDate,dw:Date.prototype.getUTCDay,dW:function(){return m[parseInt(this.getUTCDay(),10)-1]},DW:function(){return s[parseInt(this.getUTCDay(),10)-1]},HH:Date.prototype.getUTCHours,MM:Date.prototype.getUTCMinutes,SS:Date.prototype.getUTCSeconds,MS:Date.prototype.getUTCMilliseconds,_MS:function(){return $.padLeft(Date.prototype.getUTCMilliseconds.apply(this),3,"0")}},i=Object.keys(u).sort().reverse(),p={YYYY:f=Date.prototype.setUTCFullYear,yyyy:f,YY:l=function(t){return this.setUTCFullYear((t>50?1900:2e3)+t)},yy:l,mm:function(t){return this.setUTCMonth(t-1)},dd:Date.prototype.setUTCDate,HH:Date.prototype.setUTCHours,MM:Date.prototype.setUTCMinutes,SS:Date.prototype.setUTCSeconds,_MS:function(t){return this.setUTCMilliseconds(parseInt(t,10))},MS:Date.prototype.setUTCMilliseconds},h=Object.keys(p).sort().reverse(),r=Math.floor,$.type.register("date",{is:function(t){return $.isType(Date,t)},array:function(t){return[t]},string:function(t,n,e){return $.date.format(t,n,e)},number:function(t,n){return $.date.stamp(t,n)}}),$.type.extend("string",{date:function(t,n){return null==n&&(n=$.date.defaultFormat),new Date($.date.parse(t,n,"ms"))}}),$.type.extend("number",{date:function(t,n){return null==n&&(n=$.date.defaultUnit),$.date.unstamp(t,n)}}),t=function(t){return function(n,e,r){var i;return null==r&&(r=$.date.defaultUnit),i=$.date.unstamp(n,r),p[t].call(i,u[t].call(i)+e),$.date.stamp(i,r)}},{$:{date:{defaultUnit:"s",defaultFormat:"yyyy-mm-dd HH:MM:SS",stamp:function(t,n){return null==t&&(t=new Date),null==n&&(n=$.date.defaultUnit),r(t/v[n])},unstamp:function(t,n){return null==n&&(n=$.date.defaultUnit),new Date(r(t*v[n]))},convert:function(t,n,e){return null==n&&(n=$.date.defaultUnit),null==e&&(e=$.date.defaultUnit),$.is("date",t)&&(t=$.date.stamp(t,n)),r(t*v[n]/v[e])},midnight:function(t,n){return null==n&&(n=$.date.defaultUnit),$.date.convert($.date.convert(t,n,"d"),"d",n)},format:function(t,n,e){var r,o,s,a;for(null==n&&(n=$.date.defaultFormat),null==e&&(e=$.date.defaultUnit),$.is("date",t)&&(t=$.date.stamp(t,e)),o=$.date.unstamp(t,e),r=0,a=i.length;a>r;r++)s=i[r],n=n.replace(s,$.padLeft(""+u[s].call(o),s.length,"0"));return n},parse:function(t,n,e){var r,i,u,o,s,a;for(null==n&&(n=$.date.defaultFormat),null==e&&(e=$.date.defaultUnit),i=new Date(0),o=0;o<n.length;){for(r=0,a=h.length;a>r;r++)if(s=h[r],n.indexOf(s,o)===o){try{p[s].call(i,parseInt(t.slice(o,o+s.length),10))}catch(e){throw u=e,new Error("Invalid date ('"+t+"') given format mask: "+n+" (failed at position "+o+")")}o+=s.length-1;break}o+=1}return $.date.stamp(i,e)},addMilliseconds:t("MS"),addSeconds:t("SS"),addMinutes:t("MM"),addHours:t("HH"),addDays:t("dd"),addMonths:t("mm"),addYears:t("yyyy"),range:function(n,e,r,i,u){var o,s,a;for(null==r&&(r=1),null==i&&(i="dd"),null==u&&(u=$.date.defaultUnit),o=t(i),a=[n];(s=a[a.length-1])<e;)a.push(o(s,r,u));return a}}},midnight:function(t){return null==t&&(t=$.date.defaultUnit),this.map(function(){return $.date.midnight(this,t)})},unstamp:function(t){return null==t&&(t=$.date.defaultUnit),this.map(function(){return $.date.unstamp(this,t)})},stamp:function(t){return null==t&&(t=$.date.defaultUnit),this.map(function(){return $.date.stamp(this,t)})},dateFormat:function(t,n){return null==t&&(t=$.date.defaultFormat),null==n&&(n=$.date.defaultUnit),this.map(function(){return $.date.format(this,t,n)})},dateParse:function(t,n){return null==t&&(t=$.date.defaultFormat),null==n&&(n=$.date.defaultUnit),this.map(function(){return $.date.parse(this,t,n)})}}}),$.plugin({provides:"debug, debugStack",depends:"core"},function(){var t,n;return t=function(t,n){var e,r,i,u,o,s,a;a=/(?:\r\n|\r|\n)/,i=null;try{i=require("fs")}catch(n){return e=n,t}return u=$(String(t).split(a)).filter(/^$/,!1),n||(u=u.filter(/node_modules/,!1)),s=u.first(),u=u.skip(1),o=Object.create(null),r=u.map(function(t){var n,r,u,s,c,l,f,h,p;if(null==t)return null;u=t.replace(/^\s*at\s+/g,"").replace(/.*\(([^:]+:\d+:\d+)\)$/,"$1");try{return f=u.split(/:/),u=f[0],l=f[1],r=f[2],s=null!=o[u]?o[u]:o[u]=String(i.readFileSync(u)).split(a),null==s?null:(n="",l>1&&(n=s[l-2],n.length>80&&(n="..8<.. "+n.substr(r-25,50)+" ..>8..")),l>=s.length?null:(c=s[l-1],null==c?null:(c.length>80&&(c="..8<.."+c.substr(r-25,50)+"..>8..",r=31),p=c.replace(/[^\t]/g,"").length,h=$.repeat("	",p)+$.repeat(" ",r-1-p),"  "+(l-1)+" "+n+"\n  "+l+" "+c+"\n  "+l+" "+h+"^")))}catch(t){return e=t,null}}),s+"\n"+$.weave(r,u).filter(null,!1).join("\n")},n=function(t,e){return t&&t.constructor?n(t.constructor.__super__,e.push(t.constructor)):e},{$:{debugStack:function(n,e){var r;return null==e&&(e=!1),r=function(){switch(!1){case!$.is("error",n):return String(n.stack);case!$.is("string",n):return n;default:return String(n)}}(),t(r,e)},protoChain:function(t){return n(t,$())}}}}),$.plugin({provides:"delay,immediate,interval",depends:"is,select,extend,bound"},function(){return{$:{delay:function(){var t;return t=$.extend([],function(){var t;return t=function(t){return function(){return t.length&&t.shift()(),null}},{add:function(n,e){var r,i,u;for($.extend(n,{order:e+$.now,timeout:setTimeout(t(this),e)}),i=r=0,u=this.length;u>=r;i=r+=1)if(i===this.length||this[i].order>n.order){this.splice(i,0,n);break}return this},cancel:function(t){var n;return(n=this.indexOf(t))>-1&&(this.splice(n,1),clearTimeout(t.timeout)),this}}}()),function(n,e){var r,i,u;switch(!1){case!$.is("object",n):return r=$(function(){var t;t=[];for(i in n)u=n[i],t.push($.delay(i,u));return t}()),{cancel:function(){return r.select("cancel").call()},unref:function(){return r.select("unref").call()},ref:function(){return r.select("ref").call()}};case!$.is("function",e):return t.add(e,parseInt(n,10)),{cancel:function(){return t.cancel(e)},unref:function(t){var n;return null!=(n=t.timeout)?n.unref():void 0},ref:function(t){var n;return null!=(n=t.timeout)?n.ref():void 0}};default:throw new Error("Bad arguments to $.delay (expected: int,function given: "+$.type(n)+","+$.type(e)+")")}}}(),immediate:function(){switch(!1){case!("setImmediate"in $.global):return $.global.setImmediate;case null==("undefined"!=typeof process&&null!==process?process.nextTick:void 0):return process.nextTick;default:return function(t){return setTimeout(t,0)}}}(),interval:function(t,n){var e,r,i;return r=!1,i=$.delay(t,e=function(){return r||n(),$.delay(t,e)}),$.extend(i,{pause:function(t){return null==t&&(t=!0),r=t},resume:function(t){return null==t&&(t=!0),r=!t}})}},delay:function(t,n){return $.delay(t,$.bound(this,n)),this}}}),$.plugin({depends:"inherit,reduce",provides:"diff,stringDistance,stringDiff"},function(){var t,n,e,r,i,u,o,s,a;return o=Object.create(null),s=Math.min,u=function(t,n,e,r,i,a,c,l,f){var h,p;return null!=o[h=[t,n,e,r,i,a,c,l,f]]?o[h]:o[h]=null!=o[p=[r,i,a,t,n,e,c,l,f]]?o[p]:o[p]=function(){switch(!1){case!(0>=a):return e;case!(0>=e):return a;default:return s(c+u(t,n+1,e-1,r,i,a,c,l,f),l+u(t,n,e,r,i+1,a-1,c,l,f),f*(t[n]!==r[i])+u(t,n+1,e-1,r,i+1,a-1,c,l,f))}}()},t=function(t){return $.inherit({toHTML:function(){return this.reduce(function(t,n){return t+=function(){switch(n.op){case"ins":return"<ins>"+n.v+"</ins>";case"del":return"<del>"+n.v+"</del>";case"sub":return"<del>"+n.v+"</del><ins>"+n.w+"</ins>";case"sav":return n.v}}()},"")}},t.reduce(function(t,n){var e;return"sub"===n.op&&n.v===n.w&&(n.op="sav",delete n.w),t.length&&(e=t.last()).op===n.op?(e.v+=n.v,"sub"===e.op&&(e.w+=n.w)):t.push(n),t},$()))},r=Object.create(null),n=function(t){return{op:"del",v:t}},i=function(t){return{op:"ins",v:t}},a=function(t,n){return{op:"sub",v:t,w:n}},e=function(o,c,l,f,h,p,d,g,m){var v;return null!=r[v=[o,c,l,f,h,p,d,g,m]]?r[v]:r[v]=t(function(){var t,r,v,y,b,x,w,k,S,T,j;switch(!1){case!(0>=p):for(k=o.substr(c,l),T=[],t=0,x=k.length;x>t;t++)y=k[t],T.push(n(y));return T;case!(0>=l):for(S=f.substr(h,p),j=[],r=0,w=S.length;w>r;r++)y=S[r],j.push(i(y));return j;default:switch(m*=o[c]!==f[h],v={del:[o+0,c+1,l-1,f+0,h+0,p+0,1,1.5,1.5],ins:[o+0,c+0,l+0,f+0,h+1,p-1,1.5,1,1.5],sub:[o+0,c+1,l-1,f+0,h+1,p-1,1,1,1]},b={del:d+u.apply(null,v.del),ins:g+u.apply(null,v.ins),sub:m+u.apply(null,v.sub)},s(b.del,b.ins,b.sub)){case b.del:return $(n(o[c])).concat(e.apply(null,v.del));case b.ins:return $(i(f[h])).concat(e.apply(null,v.ins));case b.sub:return $(a(o[c],f[h])).concat(e.apply(null,v.sub))}}}())},{$:{stringDistance:function(t,n){return u(t,0,t.length,n,0,n.length,1,1,1)},stringDiff:function(t,n){return e(t,0,t.length,n,0,n.length,1,1,1.5)}}}}),null!=$.global.document&&$.plugin({provides:"dom,HTML,html,append,appendText,appendTo,prepend,prependTo,before,after,wrap,unwrap,replace,attr,data,addClass,removeClass,toggleClass,hasClass,text,val,css,defaultCss,rect,width,height,top,left,bottom,right,position,scrollToCenter,child,parents,next,prev,remove,find,querySelectorAll,clone,toFragment",depends:"function,type,string"},function(){var t,n,e,r,i,u,o,s,a;return n=!1,$.type.register("nodelist",{is:function(t){return null!=t&&$.isType("NodeList",t)},hash:function(t){var n;return $(function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push($.hash(n));return i}()).sum()},array:function(){var t;try{return document.querySelectorAll("xxx").__proto__={},$.identity}catch(e){return t=e,n=!0,function(t){var n,e,r,i;for(i=[],n=0,e=t.length;e>n;n++)r=t[n],i.push(r);return i}}}(),string:function(t){return"{Nodelist:["+$(t).select("nodeName").join(",")+"]}"},node:function(t){return $(t).toFragment()}}),$.type.register("node",{is:function(t){return(null!=t?t.nodeType:void 0)>0},hash:function(t){return $.checksum(t.nodeName)+$.hash(t.attributes)+$.checksum(t.innerHTML)},string:function(t){return t.toString()},node:$.identity}),$.type.register("fragment",{is:function(t){return 11===(null!=t?t.nodeType:void 0)},hash:function(t){var n;return $(function(){var e,r,i,u;for(i=t.childNodes,u=[],e=0,r=i.length;r>e;e++)n=i[e],u.push($.hash(n));return u}()).sum()},string:function(t){return t.toString()},node:$.identity}),$.type.register("html",{is:function(t){var n;return"string"==typeof t&&"<"===(n=t.trimLeft())[0]&&">"===n[n.length-1]},node:function(t){var n,e,r,i,u,o,s;if((o=document.createElement("div")).innerHTML=t,1===(u=(e=o.childNodes).length))return o.removeChild(e[0]);for(r=document.createDocumentFragment(),i=n=0,s=u;s>n;i=n+=1)r.appendChild(o.removeChild(e[0]));return r},array:function(t){var n;return $.type.lookup(n=$.HTML.parse(t)).array(n)},string:function(t){return"'"+t+"'"},repr:function(t){return'"'+t+'"'}}),$.type.extend({unknown:{node:function(){return null}},bling:{node:function(t){return t.toFragment()}},node:{html:function(t){var n,e;return n=document.createElement("div"),n.appendChild(t=t.cloneNode(!0)),e=n.innerHTML,n.removeChild(t),e}},string:{node:function(t){return $(t).toFragment()},array:function(){return n?function(t){var n;return $.type.lookup(n=document.querySelectorAll(t)).array(n)}:function(t){return document.querySelectorAll(t)}}()},function:{node:function(t){return $(t.toString()).toFragment()}}}),s=function(t){return t.parentNode||document.createDocumentFragment().appendChild(t),t},e=function(t,n){return s(t).parentNode.insertBefore(n,t)},t=function(t,n){return s(t).parentNode.insertBefore(n,t.nextSibling)},a=function(t){return $.type.lookup(t).node(t)},r=!1,u=!1,$.computeCSSProperty=function(t){return function(){return $.global.getComputedStyle(this,null).getPropertyValue(t)}},i=function(t){return function(n){return null!=n?this.css(t,n):this.rect().select(t)}},o=function(t){return function(){return this.map(function(n){return $(function(){var e;for(e=[];n=n[t];)e.push(n);return e}())})}},{$:{HTML:{parse:function(t){return $.type.lookup(t).node(t)},stringify:function(t){return $.type.lookup(t).html(t)},escape:function(t){var n;return r||(r=$("<div>&nbsp;</div>").child(0)),n=r.zap("data",t).select("parentNode.innerHTML").first(),r.zap("data",""),n}}},html:function(t){switch($.type(t)){case"undefined":case"null":return this.select("innerHTML");case"string":case"html":return this.zap("innerHTML",t);case"bling":return this.html(t.toFragment());case"node":return this.each(function(){var n;for(this.replaceChild(this.childNodes[0],t),n=[];this.childNodes.length>1;)n.push(this.removeChild(this.childNodes[1]));return n})}},append:function(t){return t=a(t),null!=t?this.each(function(n){return null!=n&&"function"==typeof n.appendChild?n.appendChild(t.cloneNode(!0)):void 0}):void 0},appendText:function(t){var n;return n=document.createTextNode(t),null!=n?this.each(function(t){return null!=t&&"function"==typeof t.appendChild?t.appendChild(n.cloneNode(!0)):void 0}):void 0},appendTo:function(t){var n,e;return n=this.map(function(){return this.cloneNode(!0)}),e=0,$(t).each(function(){return this.appendChild(n[e++])}),n},prepend:function(t){return null!=t&&(t=a(t),this.take(1).each(function(){switch(!1){case!(this.childNodes.length>0):return e(this.childNodes[0],t);default:return this.appendChild(t)}}),this.skip(1).each(function(){switch(!1){case!this.childNodes.length:return e(this.childNodes[0],t.cloneNode(!0));default:return this.appendChild(t.cloneNode(!0))}})),this},prependTo:function(t){return null!=t&&$(t).prepend(this),this},before:function(t){return null!=t&&(t=a(t),this.take(1).each(function(){return e(this,t)}),this.skip(1).each(function(){return e(this,t.cloneNode(!0))})),this},after:function(n){return null!=n&&(n=a(n),this.take(1).each(function(){return t(this,n)}),this.skip(1).each(function(){return t(this,n.cloneNode(!0))})),this},wrap:function(t){if(t=a(t),$.is("fragment",t))throw new Error("cannot call .wrap() with a fragment as the parent");return this.each(function(n){var e,r;return $.is("fragment",n)||!n.parentNode?t.appendChild(n):(e=n.parentNode,r=document.createElement("dummy"),t.appendChild(e.replaceChild(r,n)),e.replaceChild(t,r))})},unwrap:function(){return this.each(function(){return this.parentNode&&this.parentNode.parentNode?this.parentNode.parentNode.replaceChild(this,this.parentNode):this.parentNode?this.parentNode.removeChild(this):void 0})},replace:function(t){var n,e,r,i,u,o;if($.is("regexp",t))return i=arguments[1],this.map(function(n){return n.replace(t,i)});for(t=a(t),e=this.map(function(){return t.cloneNode(!0)}),r=n=0,u=e.length;u>n;r=n+=1)null!=(o=this[r].parentNode)&&o.replaceChild(e[r],this[r]);
return e},attr:function(t,n){var e;if($.is("object",t))for(e in t)n=t[e],this.attr(e,n);else switch(n){case void 0:return this.select("getAttribute").call(t,n);case null:this.select("removeAttribute").call(t,n);break;default:this.select("setAttribute").call(t,n)}return this},data:function(t,n){return this.attr("data-"+$.dashize(t),n)},addClass:function(t){var n;return n=function(t){return""!==t},this.removeClass(t).each(function(){var e;return e=this.className.split(" ").filter(n),e.push(t),this.className=e.join(" ")})},removeClass:function(t){var n;return n=function(n){return n!==t},this.each(function(){return this.className=this.className.split(" ").filter(n).join(" "),0===this.className.length?this.removeAttribute("class"):void 0})},toggleClass:function(t){var n;return n=function(n){return n!==t},this.each(function(){var e,r;return e=this.className.split(" "),r=$.not($.isEmpty),e.indexOf(t)>-1?r=$.and(n,r):e.push(t),this.className=e.filter(r).join(" "),0===this.className.length?this.removeAttribute("class"):void 0})},hasClass:function(t){return this.select("className.split").call(" ").select("indexOf").call(t).map(function(t){return t>-1})},text:function(t){return null!=t?this.zap("textContent",t):this.select("textContent")},val:function(t){return null!=t?this.zap("value",t):this.select("value")},css:function(t,n){var e,r,i,u,o,s,a,c;if(null!=n||$.is("object",t)){if(a=this.select("style.setProperty"),$.is("object",t))for(i in t)n=t[i],a.call(i,n,"");else if($.is("array",n))for(r=e=0,s=u=Math.max(n.length,o=a.length);s>e;r=e+=1)a[r%o](t,n[r%u],"");else $.is("function",n)?c=this.select("style."+t).weave(this.map($.computeCSSProperty(t))).fold($.coalesce).weave(a).fold(function(e,r){return e(t,n.call(r,r))}):a.call(t,n,"");return this}return this.select("style."+t).weave(this.map($.computeCSSProperty(t))).fold($.coalesce)},defaultCss:function(t,n){var e,r,i;if(r=this.selector,i="",$.is("string",t)){if(!$.is("string",n))throw Error("defaultCss requires a value with a string key");i+=r+" { "+t+": "+n+" } "}else if($.is("object",t))for(e in t+"} ")i+=r+" { "+(e+": "+t[e]+"; ");return $("<style></style>").text(i).appendTo("head"),this},rect:function(){return this.map(function(t){switch(t){case window:return{width:window.innerWidth,height:window.innerHeight,top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};default:return t.getBoundingClientRect()}})},width:i("width"),height:i("height"),top:i("top"),left:i("left"),bottom:i("bottom"),right:i("right"),position:function(t,n){switch(!1){case!(null==t):return this.rect();case!(null==n):return this.css("left",$.px(t));default:return this.css({top:$.px(n),left:$.px(t)})}},scrollToCenter:function(){return document.body.scrollTop=this[0].offsetTop-$.global.innerHeight/2,this},child:function(t){return this.select("childNodes").map(function(){return this[0>t?t+this.length:t]})},parents:o("parentNode"),prev:o("previousSibling"),next:o("nextSibling"),remove:function(){return this.each(function(){var t;return null!=(t=this.parentNode)?t.removeChild(this):void 0})},find:function(t,n){return null==n&&(n=0),this.filter("*").map(function(){switch(n){case 0:return function(){return this.querySelectorAll(t)};case 1:return function(){return $(this.querySelector(t))};default:return function(){return $(this.querySelectorAll(t)).take(n)}}}()).flatten()},querySelectorAll:function(t){return this.filter("*").reduce(function(n,e){return n.extend(e.querySelectorAll(t))},$())},clone:function(t,n){var e;return null==t&&(t=!0),null==n&&(n=1),e=function(n){return $.is("node",n)?n.cloneNode(t):void 0},this.map(function(){var t,r,i,u;switch(n){case 1:return e(this);default:for(u=[],t=r=0,i=n;i>r;t=r+=1)u.push(e(this));return u}})},toFragment:function(){var t;return this.length>1?(t=document.createDocumentFragment(),this.map(a).map(function(n){return t.appendChild(n)}),t):a(this[0])}}}),$.plugin({provides:"EventEmitter",depends:"type,hook"},function(){return{$:{EventEmitter:$.init.append(function(t){var n,e,r;return null==t&&(t={}),r=Object.create(null),e=function(t){return r[t]||(r[t]=[])},$.inherit({emit:function(){var t,n,r,i,u,o;for(r=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],o=e(r),n=0,u=o.length;u>n;n++)i=o[n],i.apply(this,t);return this},on:n=function(t,n){var r,i;switch($.type(t)){case"object":for(r in t)i=t[r],this.addListener(r,i);break;case"string":e(t).push(n),this.emit("newListener",t,n)}return this},addListener:n,removeListener:function(t,n){var r,i;return(r=(i=e(t)).indexOf(n))>-1?i.splice(r,1):void 0},removeAllListeners:function(t){return r[t]=[]},setMaxListeners:function(){},listeners:function(t){return e(t).slice(0)}},t)})}}}),$.plugin({depends:"dom,function,core",provides:"event,bind,unbind,trigger,delegate,undelegate,click,ready"},function(){var t,n,e,r,i,u,o,s;return t=/,* +/,u=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","keypress","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"],i=function(t){return function(n){return $.is("function",n)?this.bind(t,n):this.trigger(t,n)}},e=function(){var t,n,r;return r=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],0===t.length?r:e.apply(null,[r[n=t[0]]||(r[n]=Object.create(null))].concat(slice.call(t.slice(1))))},s=$.once(function(){var t;return $(document).trigger("ready").unbind("ready"),"function"==typeof document.removeEventListener&&document.removeEventListener("DOMContentLoaded",s,!1),"function"==typeof(t=$.global).removeEventListener?t.removeEventListener("load",s,!1):void 0}),"function"==typeof document.addEventListener&&document.addEventListener("DOMContentLoaded",s,!1),"function"==typeof(r=$.global).addEventListener&&r.addEventListener("load",s,!1),n=function(n){return function(e,r){var i;return i=(e||"").split(t),this.each(function(){var t,e,u,o;for(o=[],t=0,u=i.length;u>t;t++)e=i[t],o.push(this[n](e,r,!0));return o})}},o={bind:n("addEventListener"),unbind:n("removeEventListener"),trigger:function(n,e){var r,i,u,o,s;for(null==e&&(e={}),e=$.extend({bubbles:!0,cancelable:!0},e),s=(n||"").split(t),r=0,o=s.length;o>r;r++){switch(u=s[r]){case"click":case"mousemove":case"mousedown":case"mouseup":case"mouseover":case"mouseout":i=document.createEvent("MouseEvents"),e=$.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},e),i.initMouseEvent(u,e.bubbles,e.cancelable,$.global,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);break;case"blur":case"focus":case"reset":case"submit":case"abort":case"change":case"load":case"unload":i=document.createEvent("UIEvents"),i.initUIEvent(u,e.bubbles,e.cancelable,$.global,1);break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":i=document.createEvent("TouchEvents"),e=$.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},e),i.initTouchEvent(u,e.bubbles,e.cancelable,$.global,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.touches,e.targetTouches,e.changedTouches,e.scale,e.rotation);break;case"gesturestart":case"gestureend":case"gesturecancel":i=document.createEvent("GestureEvents"),e=$.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,target:null,scale:1,rotation:0},e),i.initGestureEvent(u,e.bubbles,e.cancelable,$.global,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.target,e.scale,e.rotation);break;case"keydown":case"keypress":case"keyup":i=document.createEvent("KeyboardEvents"),e=$.extend({view:null,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},e),i.initKeyboardEvent(u,e.bubbles,e.cancelable,$.global,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:i=document.createEvent("Events"),i.initEvent(u,e.bubbles,e.cancelable),i=$.extend(i,e)}i&&this.each(function(){var t;try{return this.dispatchEvent(i)}catch(n){return t=n,$.log("dispatchEvent error:",t)}})}return this},delegate:function(t,n,r){var i;return i=function(n){return function(e){var i;return i=$(e.target),n.find(t).intersect(i.parents().first().union(i)).each(function(){return r.call(e.target=this,e)})}}(this),this.bind(n,i).each(function(){return e(this,"__alive__",t,n)[r]=i})},undelegate:function(t,n,r){var i;return i=this,i.each(function(){var u;return u=e(this,"__alive__",t,n),u&&u[r]?(i.unbind(n,u[r]),delete u[r]):void 0})},click:function(t){var n;return null==t&&(t={}),("auto"===(n=this.css("cursor"))||""===n)&&this.css("cursor","pointer"),$.is("function",t)?this.bind("click",t):this.trigger("click",t),this},ready:function(t){return s.exhausted?t.call(this):this.bind("ready",t)}},u.forEach(function(t){return o[t]=i(t)}),o}),$.plugin({provides:"function,identity,compose,once,cycle,bound,partial",depends:"extend,is,defineProperty,map"},function(){return{$:{identity:function(t){return t},not:function(t){return function(){return!t.apply(this,arguments)}},compose:function(t,n){return function(e){var r;return t.call(r,r=n.call(e,e))}},and:function(t,n){return function(e){return n.call(this,e)&&t.call(this,e)}},once:function(t,n){return null==n&&(n=1),$.defineProperty(function(){return n-- >0?t.apply(this,arguments):void 0},"exhausted",{get:function(){return 0>=n}})},cycle:function(){var t,n;return t=1<=arguments.length?slice.call(arguments,0):[],n=-1,function(){return t[n=++n%t.length].apply(this,arguments)}},bound:function(t,n,e){var r;return null==e&&(e=[]),null==n?$.identity:($.is("function",n.bind)?(e.splice(0,0,t),r=n.bind.apply(n,e)):r=function(){var r;return r=1<=arguments.length?slice.call(arguments,0):[],n.apply(t,e.length?e:r)},$.extend(r,{toString:function(){return"bound-method of "+t+"."+n.name}}))},partial:function(){var t,n;return n=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],n.apply(null,slice.call(t).concat(slice.call(e)))}}},partial:function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.map(function(n){return $.partial.apply($,[n].concat(slice.call(t)))})}}}),$.plugin({provides:"hash",depends:"type"},function(){var t,n;return n=4294967295,t=function(t){return function(e){var r;return t+$(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push($.hash(r));return i}()).reduce(function(t,e){return(t*t+(0|e))%n},1)}},$.type.extend({unknown:{hash:function(t){return $.checksum($.toString(t))}},object:{hash:function(t){var n,e;return 1970931729+$(function(){var r;r=[];for(n in t)e=t[n],r.push($.hash(n)+$.hash(e));return r}()).sum()}},array:{hash:t(1816922041)},arguments:{hash:t(298517431)},bling:{hash:t(92078573)},bool:{hash:function(t){return parseInt(t?1:void 0)}},regexp:{hash:function(t){return 148243084+$.checksum($.toString(t))}}}),{$:{hash:function(t){return $.type.lookup(t).hash(t)}},hash:function(){return $.hash(this)}}}),$.plugin(function(){return{$:{histogram:function(t,n,e){var r,i,u,o,s,a,c,l,f,h,p,d,g,m,v,y,b,x,w;for(null==n&&(n=1),null==e&&(e=60),u=$(),a=0,p=1/0,h=0,f=0,x=0,r=0,c=t.length;c>r;r++)w=t[r],p=Math.min(w,p),f=Math.max(w,f),x+=w,s=Math.floor(w/n),s in u?u[s]+=1:u[s]=1,a=Math.max(a,s+1);for(u.length=a,h=x/t.length,l=u.max(),u=u.or(0).scale(1/l).scale(e),b=u.sum(),y="",m=0,d=i=0,v=a;v>i;d=i+=1)o=(d+1)*n,g=100*u[d]/b,m+=g,y+=$.padLeft(m.toFixed(2)+"%",7)+$.padRight(" < "+o.toFixed(2),10)+": "+$.repeat("#",u[d])+"\n";return y+("N: "+t.length+" Min: "+p.toFixed(2)+" Max: "+f.toFixed(2)+" Mean: "+h.toFixed(2))}},histogram:function(){return $.histogram(this)}}}),$.plugin({provides:"hook",depends:"type"},function(){var t;return t=function(){var t;return t=[],$.extend(function(n){var e,r,i;for(e=0,i=t.length;i>e;e++)r=t[e],n=r.call(this,n);return n},{prepend:function(n){return t.unshift(n),n},append:function(n){return t.push(n),n}})},$.init=t(),{$:{hook:t}}}),$.plugin({depends:"dom",provides:"http"},function(){var t;return t=function(t){var n,e;return $.is("object",t)?(e=JSON.parse(JSON.stringify(t)),function(){var t;t=[];for(n in e)t.push(n+"="+escape(e[n]));return t}().join("&")):t},$.type.register("http",{is:function(t){return $.isType("XMLHttpRequest",t)},array:function(t){return[t]}}),{$:{http:function(n,e){var r,i,u,o;null==e&&(e={}),o=new XMLHttpRequest,$.is("function",e)&&(e={success:$.bound(o,e)}),e=$.extend({method:"GET",data:null,state:$.identity,success:$.identity,error:$.identity,async:!0,asBlob:!1,timeout:0,followRedirects:!1,withCredentials:!1,headers:{}},e),e.state=$.bound(o,e.state),e.success=$.bound(o,e.success),e.error=$.bound(o,e.error),e.data&&"GET"===e.method?n+="?"+t(e.data):e.data&&"POST"===e.method&&(e.data=t(e.data)),o.open(e.method,n,e.async),o=$.extend(o,{asBlob:e.asBlob,timeout:e.timeout,followRedirects:e.followRedirects,withCredentials:e.withCredentials,onreadystatechange:function(){return"function"==typeof e.state&&e.state(),4===o.readyState?200===o.status?e.success(o.responseText):e.error(o.status,o.statusText):void 0}}),i=e.headers;for(r in i)u=i[r],o.setRequestHeader(r,u);return o.send(e.data),$(o)},post:function(t,n){return null==n&&(n={}),$.is("function",n)&&(n={success:n}),n.method="POST",$.http(t,n)},get:function(t,n){return null==n&&(n={}),$.is("function",n)&&(n={success:n}),n.method="GET",$.http(t,n)}}}}),$.depends("hook",function(){return $.init.append(function(t){var n,e;return e=new Map,n=[],$.inherit({index:function(t){var r,i,u,o,s;for(-1===n.indexOf(t)&&(n.push(t),e.set(t.toString(),new Map)),i=0,o=this.length;o>i;i++)s=this[i],u=t(s),r=e.get(t.toString()),r.has(u)||r.set(u,$()),r.get(u).push(s);return this},query:function(t){var r,i,u,o,s;for(i=0,s=n.length;s>i;i++)if(o=n[i],r=e.get(o.toString()),r.has(u=o(t)))return r.get(u);return $()},queryOne:function(t){return this.query(t)[0]}},t)})}),$.plugin({provides:"toHTML",depends:"type,synth,once"},function(){var t,n,e,r;return n=$.once(function(){try{return $("head").append($.synth("style#dump").text("table.dump                { border: 1px solid black; }\ntable.dump tr.h           { background-color: blue; color: white; cursor: pointer; }\ntable.dump tr.h th        { padding: 0px 4px; }\ntable.dump tr.h.array     { background-color: purple; }\ntable.dump tr.h.bling     { background-color: gold; }\ntable.dump td             { padding: 2px; }\ntable.dump td.k           { background-color: lightblue; }\ntable.dump td.v.string    { background-color: #cfc; }\ntable.dump td.v.number    { background-color: #ffc; }\ntable.dump td.v.bool      { background-color: #fcf; }"))}catch(t){}}),t=$.once(function(){try{return $("head").append($.synth("script#dump").text("$(document.body).delegate('table.dump tr.h', 'click', function() {\n	$(this.parentNode).find(\"tr.kv\").toggle()\n})"))}catch(t){}}),e=function(t,n){var e,r,i,u;for(u=$.synth("table.dump tr.h."+t+" th[colspan=2] '"+t+"'"),("array"===t||"bling"===t||"nodelist"===t)&&u.find("th").appendText(" ["+n.length+"]"),e=0,r=n.length;r>e;e++)i=n[e],u.append(i);return u[0]},r=function(t,n,e){var r,i,u;switch(i=$.synth("tr.kv td.k[align=right][valign=top] '"+t+"' + td.v"),u=i.find("td.v"),r=$.type(n=$.toHTML(n,e))){case"string":case"number":case"bool":case"html":case"null":case"undefined":u.appendText(String(n));break;default:u.append(n)}return u.addClass(r),e||i.toggle(),i},{$:{toHTML:function(i,u){var o,s,a,c;switch(null==u&&(u=!0),n(),t(),a=$.type(i)){case"string":case"number":case"bool":case"null":case"undefined":case"html":return i;case"bling":case"array":case"nodelist":return e(a,function(){var t,n,e;for(e=[],o=t=0,n=i.length;n>t;o=++t)c=i[o],e.push(r(o,c,u));return e}());case"object":case"array":return e(a,function(){var t;t=[];for(o in i)c=i[o],t.push(r(o,c,u));return t}());case"node":return s=$.HTML.stringify(i),s.substr(0,s.indexOf(">")+1)+"...";default:return String(i)}}}}}),$.plugin({provides:"keyName,keyNames",depends:"math"},function(){var t,n,e,r,i,u,o,s,a,c,l;for(i={Backspace:8,BS:8,Tab:9,"	":9,Enter:13,"\n":12,Shift:16,Ctrl:17,Alt:18,Pause:19,Break:19,Caps:20,"Caps Lock":20,Esc:27,Escape:27,Space:32," ":32,PgUp:33,"Page Up":33,PgDn:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,Delete:46,Times:106,"*":106,Plus:107,"+":107,Minus:109,"-":109,Div:111,Divide:111,"/":111,"Semi-Colon":186,";":187,Equal:187,"=":187,Comma:188,",":188,Dash:189,"-":189,Dot:190,Period:190,".":190,"Forward Slash":191,"/":191,"Back Slash":220,"\\":220,"Single Quote":222,"'":222},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0,o=c.length;o>n;n++)t=c[n],i[t]=i[t.toLowerCase()]=t.charCodeAt(0);for(l=$.range(1,13),e=0,s=l.length;s>e;e++)t=l[e],i["F"+t]=i["f"+t]=111+t;u={};for(a in i)r=i[a],u[r]||(u[r]=a);return{$:{keyCode:function(t){var n;return null!=(n=i[t])?n:t},keyName:function(t){var n;return null!=(n=u[t])?n:t}}}}),$.plugin({depends:"dom,promise",provides:"lazy"},function(){var t;return t=function(t,n){var e,r;return r=$.Promise(),document.head.appendChild(e=$.extend(document.createElement(t),n,{onload:function(){return r.resolve(e)},onerror:function(){return r.reject.apply(r,arguments)}})),r},{$:{script:function(n){return t("script",{src:n})},style:function(n){return t("link",{href:n,rel:"stylesheet"})}}}}),$.plugin({provides:"log, logger",depends:"bound"},function(){var t;return t=function(){var n,e;return n=1<=arguments.length?slice.call(arguments,0):[],n.length?((e="function"==typeof t.pre?t.pre():void 0)&&n.unshift(e),t.out.apply(t,n),n[n.length-1]):void 0},t.out=console.log.bind(console),t.pre=null,t.enableTimestamps=function(n){return null==n&&(n=2),t.pre=[null,function(){return String(+new Date)},function(){return $.date.format(+new Date,"yyyy-mm-dd HH:MM:SS._MS","ms")}][n]},t.disableTimestamps=function(){return t.enableTimestamps(0)},{$:{log:t,logger:function(n){return function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],e.unshift(n),t.apply(null,e)}}}}}),$.plugin({provides:"matches",depends:"function,core,string"},function(){var t,n,e,r,i,u,o,s,a,c,l,f,h,p,d,g,m,v;r=function(t,n,e){return n===t},n=function(t,n,e){var r,i,u;for(r=0,i=n.length;i>r;r++)if(u=n[r],p(t,u,e))return!0;return!1},e=function(t,n,e){var r,i;for(r in n)if(i=n[r],p(t,i,e))return!0;return!1},i=function(t,n,e){var r,i;for(r in t)if(i=t[r],!p(i,n[r]))return!1;return!0},t=function(t,n,e){var r,i,u,o;for(i=r=0,u=t.length;u>r;i=++r)if(o=t[i],!p(o,n[i]))return!1;return!0},u=function(t,n,e){return t.test(String(n))},a={function:[["array","bling",n],["object",e]],regexp:[["string","number",u],["array","bling",n],["object",e]],object:[["array","bling",n],["object",i]],array:[["array","bling",t]],number:[["number",r],["array","bling",n]],string:[["string",r],["array","bling",n]]};for(g in a){for(v=a[g],p={},o=0,l=v.length;l>o;o++)for(h=v[o],c=h.pop(),s=0,f=h.length;f>s;s++)d=h[s],p[d]=c;$.type.extend(g,{matches:p})}return m={$any:function(){return!0},$type:function(t,n,e){return $.is(t.$type,n)},$class:function(t,n,e){return $.isType(t.$class,n)},$lt:function(t,n,e){return n<t.$lt},$gt:function(t,n,e){return n>t.$gt},$lte:function(t,n,e){return n<=t.$lte},$gte:function(t,n,e){return n>=t.$gte}},p=function(t,n,e){var i,u,o,s,a;if(null==e&&(e=$.type.lookup(t)),"object"===e.name)for(i in m)if(c=m[i],i in t)return c(t,n,e);u=e.matches;for(a in u)if(c=u[a],"else"!==a&&$.is(a,n))return c(t,n,e);return null!=(o=null!=(s=e.matches)&&"function"==typeof s.else?s.else(t,n,e):void 0)?o:r(t,n,e)},p.Any={$any:!0},p.Type=function(t){return{$type:t}},p.Class=function(t){return{$class:t}},{$:{matches:p}}}),$.plugin({provides:"math",depends:"core"},function(){var t,n,e,r;return $.type.extend({bool:{number:function(t){return t?1:0}},number:{bool:function(t){return!!t}}}),t=function(t){return function(n){var e,r;return e=function(){switch(!1){case!$.is("string",n):return function(t){return t[n]};case!$.is("function",n):return n;default:throw new Error(".maxBy first argument should be a string or function")}}(),r=this.first(),this.skip(1).each(function(n){return t(e(n),e(r))?r=n:void 0}),r}},{$:{range:function(t,n,e){var r;return null==e&&(e=1),null==n&&(n=t,t=0),t>n&&e>0&&(e*=-1),$(function(){var i,u,o;for(o=[],r=i=0,u=Math.ceil((n-t)/e);u>=0?u>i:i>u;r=u>=0?++i:--i)o.push(t+r*e);return o}())},zeros:function(t,n){var e;return null==n&&(n=0),$(function(){var r,i,u;for(u=[],e=r=0,i=t;i>=0?i>r:r>i;e=i>=0?++r:--r)u.push(n);return u}())},ones:function(t){var n;return $(function(){var e,r,i;for(i=[],n=e=0,r=t;r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(1);return i}())},deg2rad:function(t){return t*Math.PI/180},rad2deg:function(t){return 180*t/Math.PI}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(t){return this.ints().map(function(){return $.px(this,t)})},min:function(){return this.filter(isFinite).reduce(Math.min)},max:function(){return this.filter(isFinite).reduce(Math.max)},maxBy:t(function(t,n){return t>n}),minBy:t(function(t,n){return n>t}),mean:e=function(){return this.length?this.sum()/this.length:0},avg:e,sum:function(){var t,n,e,r;for(e=0,t=0,n=this.length;n>t;t++)r=this[t],null!=r&&isFinite(r)&&(e+=r);return e},product:function(){return this.filter(isFinite).reduce(function(t){return t*this})},squares:function(){return this.pow(2)},pow:function(t){return this.map(function(){return Math.pow(this,t)})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(t){return this.map(function(){return t*this})},add:n=function(t){var n;switch($.type(t)){case"number":return this.map(function(){return t+this});case"bling":case"array":return $(function(){var e,r,i;for(i=[],n=e=0,r=Math.min(this.length,t.length);r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(this[n]+t[n]);return i}.call(this))}},plus:n,sub:r=function(t){var n;switch($.type(t)){case"number":return this.map(function(){return this-t});case"bling":case"array":return $(function(){var e,r,i;for(i=[],n=e=0,r=Math.min(this.length,t.length);r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(this[n]-t[n]);return i}.call(this))}},minus:r,dot:function(t){var n;return $.sum(function(){var e,r,i;for(i=[],n=e=0,r=Math.min(this.length,t.length);r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(this[n]*t[n]);return i}.call(this))},angle:function(t){return Math.acos(this.dot(t)/(this.magnitude()*t.magnitude()))},cross:function(t){return $(this[1]*t[2]-this[2]*t[1],this[2]*t[0]-this[0]*t[2],this[0]*t[1]-this[1]*t[0])},normalize:function(){return this.scale(1/this.magnitude())},deg2rad:function(){return this.filter(isFinite).map(function(){return this*Math.PI/180})},rad2deg:function(){return this.filter(isFinite).map(function(){return 180*this/Math.PI})}}}),$.plugin({depends:"function,hash",provides:"memoize"},function(){var t;return t=function(){var t;return t={},{has:function(n){return n in t},get:function(n){return t[n]},set:function(n,e){return t[n]=e}}},{$:{memoize:function(n){if($.is("function",n)&&(n={f:n}),!$.is("object",n))throw new Error("Argument Error: memoize requires either a function or object as first argument");return n.cache||(n.cache=t()),n.hash||(n.hash=$.hash),function(){var t;return t=n.hash(arguments),n.cache.has(t)?n.cache.get(t):n.cache.set(t,n.f.apply(this,arguments))}}}}}),$.plugin({provides:"middleware",depends:"type"},function(){return{$:{middleware:function(t){var n;return null==t&&(t=[]),n=$(),{catch:function(t){return n.push(t),this},use:function(n){return t.push(n),this},unuse:function(n){for(var e;(e=t.indexOf(n))>-1;)t.splice(e,1);return this},invoke:function(){var e,r,i;return e=1<=arguments.length?slice.call(arguments,0):[],r=-1,(i=function(u){return function(){var u;try{return t[++r].apply(t,slice.call(e).concat([i]))}catch(t){return u=t,n.call(u)}}}(this))(),this}}}}}}),$.plugin({depends:"core,function",provides:"promise"},function(){var t,n,e;return t=function(){function t(){}return t}(),e=function(n){var e,r,i,u,o,s,a,c,l,f;return null==n&&(n={}),f=[],u=c=t,e=function(t,n){for(var e;e=f.shift();)r(e,t,n);return null},r=function(t,n,e){var r,i,u,o,s;null!=(s=t.timeout)&&s.cancel();try{t(n,e)}catch(n){u=n,o=$.debugStack(u),$.log("Promise("+l.promiseId+") first-chance exception:",o);try{t(u,null)}catch(t){r=t,i=$.debugStack(r),$.log("Promise("+l.promiseId+") last-chance exception:",i)}}return null},i=function(n){return function(r,o){if(u===c&&c===t)switch(r!==t?(u=r,(null!=r?r.stack:void 0)||(u=new Error(r))):o!==t&&(c=o),!0){case o===n:return i(new TypeError("cant resolve a promise with itself"));case $.is("promise",o):o.wait(i);break;case r!==t:e(u,null);break;case o!==t:e(null,c)}return n}}(this),l=$.inherit({promiseId:$.random.string(6),wait:function(n,e){var i;return $.is("function",n)&&(i=[n,1/0],e=i[0],n=i[1]),u!==t?$.immediate(function(){return r(e,u,null)}):c!==t?$.immediate(function(){return r(e,null,c)}):(f.push(e),isFinite(parseFloat(n))&&(e.timeout=$.delay(n,function(){var t;return(t=f.indexOf(e))>-1?(f.splice(t,1),r(e,u=new Error("timeout"),void 0)):void 0}))),this},then:function(t,n){return this.wait(function(e,r){return e?"function"==typeof n?n(e):void 0:t(r)})},finish:function(n){return i(t,n),this},resolve:function(n){return i(t,n),this},fail:function(n){return i(n,t),this},reject:function(n){return i(n,t),this},reset:function(){return u=c=t,this},handler:function(t,n){return t?l.reject(t):l.resolve(n)},inspect:function(){return"{Promise["+this.promiseId+"] "+o()+"}"},toString:function(){return"{Promise["+this.promiseId+"] "+o()+"}"}},$.EventEmitter(n)),o=function(){switch(!1){case c===t:return"resolved";case u===t:return"rejected";default:return"pending"}},a=function(){return c!==t},$.defineProperty(l,"finished",{get:a}),$.defineProperty(l,"resolved",{get:a}),s=function(){return u!==t},$.defineProperty(l,"failed",{get:s}),$.defineProperty(l,"rejected",{get:s}),l},e.compose=e.parallel=function(){var t,n;return n=1<=arguments.length?slice.call(arguments,0):[],n=$(n).flatten(),t=$.Progress(1+n.length),$(n).select("wait").call(function(n){return n?t.reject(n):t.resolve(1)}),t.resolve(1)},e.collect=function(t){var n,e,r,i,u,o,s,a;if(a=[],u=$.Promise(),null==t)return u.resolve(a);for(s=$.Progress(1+t.length),e=function(t){return o.wait(function(n,e){return n?s.reject(n):s.resolve(1,a[t]=e)})},r=n=0,i=t.length;i>n;r=++n)o=t[r],e(r);return s.then(function(){return u.resolve(a)},u.reject),s.resolve(1),u},e.wrapCall=function(){var t,n,e;return n=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],e=$.Promise(),n.apply(null,slice.call(t).concat([function(t,n){return t?e.reject(t):e.resolve(n)}])),e},n=function(t){var n,r;return null==t&&(t=1),n=0,r=$.inherit({progress:function(){var e,i,u,o;return e=1<=arguments.length?slice.call(arguments,0):[],e.length?(n=null!=(u=e[0])?u:n,e.length>1&&(t=null!=(o=e[1])?o:t),i=e.length>2?e[2]:n,n>=t&&r.__proto__.__proto__.resolve(i),r.emit("progress",n,t,i),this):n},resolve:function(e,i){return null==i&&(i=e),isFinite(e)||(e=1),r.progress(n+e,t,i)},finish:function(t,n){return r.resolve(t,n)},include:function(e){return $.is("promise",e)&&(r.progress(n,t+1),e.wait(function(t,n){return t?r.reject(t):r.resolve(n)})),this},inspect:function(){return"{Progress["+r.promiseId+"] "+n+"/"+t+"}"}},e())},e.xhr=function(t){var n;return n=$.Promise(),t.onreadystatechange=function(){return this.readyState===this.DONE?200===this.status?n.resolve(t.responseText):n.resolve(this.status+" "+this.statusText):void 0},n},e.series=function(){var t,n,e;return e=1<=arguments.length?slice.call(arguments,0):[],e=$(e).flatten(),n=function(r){return function(){return r>=e.length?void 0:e[r]=e[r]().wait(function(i,u){return t.resolve(e[r]=[i,u]),$.immediate(n(r+1))})}},t=$.Progress(e.length),$.immediate(n(0)),t},$.depends("dom",function(){return e.image=function(t){var n,e;return e=$.Promise(),$.extend(n=new Image,{onerror:function(t){return e.reject(t)},onload:function(){return e.resolve(n)},src:t}),e}}),$.depends("type",function(){return $.type.register("promise",{is:function(t){return null!=t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then&&2===t.then.length}})}),{$:{Promise:e,Progress:n}}}),$.plugin({provides:"prompt,confirm",depends:"synth,keyName"},function(){var t,n,e;return e=function(){return $("head .prompt").length?void 0:$("head").append("<style class='prompt'>"+$.CSS.stringify({".prompt":{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:"999999",background:"rgba(0,0,0,.4)",fontSize:"12px"," input":{padding:"2px",margin:"0px 0px 4px -4px",width:"100%"}," button":{fontSize:"13px",".done":{fontSize:"14px"}}," > center":{width:"200px",height:"44px",margin:"20px auto",padding:"16px",background:"#ffc",borderRadius:"5px"}}})+"</style>")},n=function(t,n,r){var i,u,o,s,a;return e(),u=$.synth("div.prompt center\n	input[type="+n+"][placeholder="+t+"] + br +\n	button.cancel 'Cancel' +\n	button.done 'Done'").appendTo("body").first(),a=u.querySelector("input"),a.onkeydown=function(t){switch($.keyName(t.keyCode)){case"Enter":return o(a.value);case"Esc":return o(null)}},s=u.querySelector("button.done"),i=u.querySelector("button.cancel"),o=function(t){return delete s.onclick,delete i.onclick,u.parentNode.removeChild(u),r(t)},s.onclick=function(){return o(a.value)},i.onclick=function(){return o(null)},null},t=function(){var t,n,r,i,u,o,s,a,c;switch(n=1<=arguments.length?slice.call(arguments,0):[],i=n.pop(),s=n.shift(),r=n.length>0?n:{Yes:!0,No:!1},e(),o=$.synth("div.prompt center\n	span '"+s+"' + br").appendTo("body"),u=o.find("center"),$.type(r)){case"array":case"bling":for(t=0,a=r.length;a>t;t++)s=r[t],$.synth("button[value="+s+"] '"+s+"'").appendTo(u);break;case"object":for(s in r)c=r[s],$.synth("button[value="+c+"] '"+s+"'").appendTo(u)}return o.find("button").bind("click",function(t){return o.remove(),i(t.target.getAttribute("value"))}),null},{$:{prompt:n,confirm:t}}}),$.plugin({depends:"core",provides:"pubsub"},function(){var t;return t=function(){function t(){this.listeners={}}return t.prototype.publish=function(){var t,n,e,r,i,u,o,s,a;for(i=arguments[0],n=2<=arguments.length?slice.call(arguments,1):[],r=null,a=(e=this.listeners)[i]||(e[i]=[]),t=0,o=a.length;o>t;t++)if(s=a[t],this.filter.apply(this,[s].concat(slice.call(n))))try{s.apply(null,n)}catch(t){u=t,null==r&&(r=u)}if(r)throw r;switch(n.length){case 0:return null;case 1:return n[0];default:return n}},t.prototype.filter=function(t,n){return"patternObject"in t?$.matches(t.patternObject,n):!0},t.prototype.publisher=function(t,n){var e;return e=this,function(){return e.publish(t,n.apply(this,arguments))}},t.prototype.subscribe=function(){var t,n,e,r;return e=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],r=t.pop(),t.length>0&&(r.patternObject=t.pop()),((n=this.listeners)[e]||(n[e]=[])).push(r),r},t.prototype.unsubscribe=function(t,n){var e,r,i;return null==n?this.listeners[t]=[]:(e=(r=this.listeners)[t]||(r[t]=[]),(i=e.indexOf(n))>-1&&e.splice(i,1)),n},t}(),{$:$.extend(new t,{Hub:t})}}),$.plugin({provides:"random",depends:"type"},function(){var t,n,e,r,i,u,o,s,a,c,l,f,h,p;return r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),p="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=Math.floor,t=Math.abs,o=Math.log,s=4294967295,f=new Uint32Array(2),a=function(){var t,n,e;return n=f[0],e=f[1],t=(n+e)%s,e^=n,f[0]=n<<27|n>>>5^e^e<<7,f[1]=e<<18|e>>>14,t},c=function(){return a()/s},$.defineProperty(c,"seed",{set:function(t){return f[0]=t,f[1]=1,a(),a(),a(),t}}),c.seed=$.now,{$:{random:$.extend(c,{real:l=function(t,n){var e,r;return null==t&&(e=[0,1],t=e[0],n=e[1]),null==n&&(r=[0,t],t=r[0],n=r[1]),c()*(n-t)+t},integer:u=function(t,n){return i(l(t,n))},string:h=function(t,n,i){for(null==n&&(n=""),null==i&&(i=r);n.length<t;)n+=e(i);return n},coin:function(t){return null==t&&(t=.5),c()<=t},element:e=function(t,n){
var e,r,i,o,s,a,l,f;if(null!=n)for(f=$(n),f=f.scale(1/f.sum()),r=0,a=$(t).map(function(t){return{v:t,w:f[r++]}}).sortBy(function(t){return-t.w}),s=c(),l=0,e=0,o=a.length;o>e;e++)if(i=a[e],(l+=i.w)>=s)return i.v;return t[u(0,t.length)]},gaussian:function(n,e){var r,i,u,s,a;for(null==n&&(n=.5),null==e&&(e=.12);;)if(i=c(),u=1.7156*(c()-.5),s=i-.449871,a=t(u)+.386595,r=s*s+a*(.196*a-.25472*s),!(r>.27597&&(r>.27846||u*u>-4*o(i)*i*i)))break;return n+e*u/i},die:n=function(t){return u(1,t+1)},dice:function(t,e){return $(function(){var r,i,u;for(u=[],r=0,i=t;i>r;r+=1)u.push(n(e));return u}())},uuid:function(){return $(8,4,4,4,12).map(function(){return h(this,"",p)}).join("-")}})}}}),$.plugin({provides:"render",depends:"promise, type, logger"},function(){var t,n,e,r,i,u,o,s,a,c;return u=$.logger("[render]"),r=function(t,n,e){return null==e&&(e=$.Promise()),$.is("promise",t)?(t.wait(function(t,i){var u;return t?e.reject(t):(u=s(i,n),$.is("promise",u)?r(u,n,e):e.resolve(u))}),e):$.Promise().resolve(s(t,n))},c=function(t,n){var e;return null==n&&(n={}),r(e=s([t],n),n)},o={text:function(t,n){var e;return s(t[null!=(e=n.lang)?e:"EN"],n)}},c.register=a=function(t,n){return o[t]=n},c.reduce=s=function(t,n){var e;return(e=$.type.lookup(t)).reduce(t,e,n)},$.type.extend({unknown:{reduce:function(t,n,e){return"[ cant reduce type: "+n+" ]"}},string:{reduce:$.identity},html:{reduce:$.identity},null:{reduce:function(t,n,e){return n}},undefined:{reduce:function(t,n,e){return n}},number:{reduce:function(t,n,e){return String(t)}},function:{reduce:function(t,n,e){switch(f.length){case 0:case 1:return s(f(e));default:return $.Promise.wrap(f,e)}}},object:{reduce:function(t,n,e){var r;return(n=null!=(r=t.t)?r:t.type)in o?o[n].call(t,t,e):"[ no handler for object type: '"+n+"' "+JSON.stringify(t).substr(0,20)+"... ]"}},promise:{reduce:function(t,n,e){var r,i;return i=$.Promise(),t.wait(r=function(t,n){var u;return t?i.reject(t):$.is("promise",u=s(n,e))?u.wait(r):i.resolve(u)}),i}},array:{reduce:e=function(t,n,e){var r,u,o,a,c,l,f,h,p,d;for(h=$.Progress(l=1),p=$.Promise(),f=[],h.wait(function(t){return t?p.reject(t):p.resolve(i(f,e))}),o=!1,u=function(t,n){var r,i;return f[n]=i=s(t,e),$.is("promise",i)?(o=!0,h.progress(null,++l),i.wait(r=function(t,i){var u;return t?h.reject(t):(u=s(i,e),$.is("promise",u)?u.wait(r):h.resolve(f[n]=u))})):void 0},a=r=0,c=t.length;c>r;a=++r)d=t[a],u(d,a);return h.resolve(1),o?p:i(f)}},bling:{reduce:e}}),i=function(t,n){var e;return(e=$.type.lookup(t)).finalize(t,e,n)},$.type.extend({unknown:{finalize:function(t,n,e){return"[ cant finalize type: "+n+" ]"}},string:{finalize:$.identity},html:{finalize:$.identity},number:{finalize:function(t,n,e){return String(t)}},array:{finalize:n=function(t,n,e){var r;return function(){var n,u,o;for(o=[],n=0,u=t.length;u>n;n++)r=t[n],o.push(i(r,e));return o}().join("")}},bling:{finalize:n},null:{finalize:function(){return"null"}},undefined:{finalize:function(){return"undefined"}}}),t=function(t){return o[t]},a("link",function(t,n){var e;return["<a",function(){var n,r,i,u;for(i=["href","name","target"],u=[],n=0,r=i.length;r>n;n++)e=i[n],e in t&&u.push([" "+e+"='",t[e],"'"]);return u}(),">",s(t.content,n),"</a>"]}),a("a",t("link")),a("let",function(t,n){var e,r;return r=n[t.name],n[t.name]=t.value,e=s(t.content,n),void 0===r?delete n[t.name]:n[t.name]=r,e}),a("set",t("let")),a("get",function(t,n){return s(n[t.name],n)}),{$:{render:c}}}),$.plugin({provides:"sortBy,sortedIndex,sortedInsert"},function(){return{$:{sortedIndex:function(t,n,e,r,i){var u,o;for(null==r&&(r=0),null==i&&(i=t.length),u=function(){switch(!0){case $.is("string",e):return function(t,n){return t[e]<n[e]};case $.is("function",e):return function(t,n){return e(t)<e(n)};default:return function(t,n){return n>t}}}();i>r;)o=i+r>>>1,u(t[o],n)?r=o+1:i=o;return r}},sortBy:function(t){var n,e,r,i,u;for(n=$(),e=0,i=this.length;i>e;e++)r=this[e],u=$.sortedIndex(n,r,t),n.splice(u,0,r);return n},sortedInsert:function(t,n){return this.splice($.sortedIndex(this,t,n),0,t),this},groupBy:function(t){var n,e,r,i,u,o,s;switch(r={},$.type(t)){case"array":case"bling":for(n=0,u=this.length;u>n;n++)s=this[n],e=function(){var t,n,e;for(e=[],t=0,n=key.length;n>t;t++)i=key[t],e.push(s[i]);return e}().join(","),(r[e]||(r[e]=$())).push(s);break;case function(){var t,n,e;for(e=[],t=0,n=this.length;n>t;t++)s=this[t],e.push("string");return e}.call(this):(r[o=s[key]]||(r[o]=$())).push(s)}return $.valuesOf(r)}}}),$.plugin({provides:"StateMachine",depends:"type, logger"},function(){var t,n,e;return n=function(t,n,e){for(;"function"==typeof t;)t=t.call(n,e);return $.is("number",t)?n.state=t:void 0},e=$.logger("[StateMachine]"),{$:{StateMachine:t=function(){function t(t){var e;this.table=t,e=null,$.defineProperty(this,"state",{set:function(t){return t!==e&&t in this.table?n(this.table[e=t].enter,this):null===t&&(e=null),e},get:function(){return e}})}var e;return t.prototype.goto=e=function(t,n){return null==n&&(n=!1),function(){return n&&(this.state=null),this.state=t}},t.goto=e,t.prototype.tick=function(t){var e,r;return r=this.table[this.state],null==r?null:n(null!=(e=r[t])?e:r.def,this,t)},t.prototype.run=function(t){var e,r,i;for(this.state=0,e=0,i=t.length;i>e;e++)r=t[e],this.tick(r);return n(this.table[this.state].eof,this),this},t}()}}}),$.plugin({provides:"string",depends:"type"},function(){var t,n,e,r;return n=function(t){return function(){var n,e;n=1<=arguments.length?slice.call(arguments,0):[];try{return t.apply(null,n)}catch(t){return e=t,"[toString Error: "+e.message+"]"}}},t=function(t){return t.replace(/([^\\]{1})'/g,"$1\\'")},r=function(t){return String(t).replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"")},$.type.extend({unknown:{string:n(function(t){var n;return null!=(n="function"==typeof t.toString?t.toString():void 0)?n:String(t)}),repr:n(function(t){return $.type.lookup(t).string(t)}),number:n(function(t){return parseFloat(String(t))})},null:{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},buffer:{string:n(function(t){return String(t)}),repr:n(function(t){return"Buffer("+JSON.stringify(t.toJSON())+")"})},string:{number:n(parseFloat),repr:function(n){return"'"+t(n)+"'"}},array:{string:n(function(t){return"["+t.map($.toString).join(", ")+"]"}),repr:n(function(t){return"["+t.map($.toRepr).join(", ")+"]"})},arguments:{string:n(function(t){var n;return"["+function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push($.toString(n));return i}().join(", ")+"]"}),repr:n(function(t){var n;return"["+function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push($.toRepr(n));return i}().join(", ")+"]"})},object:{string:n(function(t){var n,e,r,i;r=[];for(e in t){try{i=t[e]}catch(t){n=t,i="[Error: "+n.message+"]"}r.push(e+":"+$.toString(i))}return"{"+r.join(", ")+"}"}),repr:n(function(t){var n,e,r,i;r=[];for(e in t){try{i=t[e]}catch(t){n=t,i="[Error: "+n.message+"]"}r.push('"'+e+'": '+$.toRepr(i))}return"{"+r.join(", ")+"}"})},function:{repr:function(t){return t.toString()},string:function(t){return t.toString().replace(/^([^{]*){(?:.|\n|\r)*}$/,"$1{ ... }")}},number:{repr:function(t){return String(t)},string:n(function(t){switch(!1){case null==t.precision:return t.toPrecision(t.precision);case null==t.fixed:return t.toFixed(t.fixed);default:return String(t)}})}}),{$:{toString:function(t){var n;if(0===arguments.length)return"function Bling() { [ ... ] }";try{return $.type.lookup(t).string(t)}catch(t){return n=t,"[$.toString Error: "+n.message+"]"}},toRepr:function(t){return $.type.lookup(t).repr(t)},px:function(t,n){return null==n&&(n=0),null!=t&&parseInt(t,10)+(0|parseInt(n))+"px"},capitalize:function(t){return t.split(" ").map(function(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()}).join(" ")},slugize:e=function(t,n){var e,r;return null==n&&(n="-"),t=function(){switch($.type(t)){case"null":case"undefined":return"";case"object":return function(){var i;i=[];for(e in t)r=t[e],i.push($.slugize(e,n)+n+$.slugize(r,n));return i}().join(n);case"array":case"bling":return t.map(function(t){return $.slugize(t,n)}).join(n);default:return String(t)}}(),t.toLowerCase().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\t/g," ").replace(/[^A-Za-z0-9. -]/g,"").replace(/\s+/g,"-")},stubize:e,dashize:function(t){var n,e,r,i,u;for(u="",r=n=0,i=0|(null!=t?t.length:void 0);i>=0?i>n:n>i;r=i>=0?++n:--n)e=t.charCodeAt(r),91>e&&e>64&&(e+=32,u+="-"),u+=String.fromCharCode(e);return u},camelize:function(t){var n;for(t=$.slugize(t),t.split("-");(n=null!=t?t.indexOf("-"):void 0)>-1;)t=$.stringSplice(t,n,n+2,t[n+1].toUpperCase());return t},commaize:function(t,n,e,r){var i,u,o,s,a;return null==n&&(n=","),null==e&&(e="."),null==r&&(r=""),$.is("number",t)&&isFinite(t)?(s=String(t),a=0>t?"-":"",o=s.split("."),i=o[0],u=o[1],i.length>3&&(i=$.stringReverse($.stringReverse(i).match(/\d{1,3}/g).join(n))),a+r+i+(null!=u?e+u:"")):"number"==typeof t&&isNaN(t)||t===1/0||t===-(1/0)?String(t):void 0},padLeft:function(t,n,e){var i;return null==e&&(e=" "),i=n-r(t).length,i>0?$.zeros(i,e).join("")+t:t},padRight:function(t,n,e){var i;return null==e&&(e=" "),i=n-r(t).length,i>0?t+$.zeros(i,e).join(""):t},stringTruncate:function(t,n,e,r){var i,u;if(null==e&&(e="..."),null==r&&(r=" "),t.length<=n)return t;if(e.length>=n)return e;for(t=t.split(r),i=[];n>0;)u=t.shift(),n-=u.length,n>=0&&i.push(u);return i.join(r)+e},stringCount:function(t,n,e,r){var i;return null==e&&(e=0),null==r&&(r=0),(i=t.indexOf(n,e))>e-1?$.stringCount(t,n,i+1,r+1):r},stringSplice:function(t,n,e,r){var i,u,o;return u=t.length,i=e,0>i&&(i+=u),o=n,0>o&&(o+=u),t.substring(0,o)+r+t.substring(i)},stringReverse:function(t){return t.split("").reverse().join("")},checksum:function(t){var n,e,r,i,u;for(n=1,r=0,i=e=0,u=t.length;u>=0?u>e:e>u;i=u>=0?++e:--e)n=(n+t.charCodeAt(i))%65521,r=(r+n)%65521;return r<<16|n},repeat:function(t,n){switch(null==n&&(n=2),!1){case 1!==n:return t;case!(1>n):return"";case!$.is("string",t):return $.zeros(n,t).join("");default:return $.zeros(n,t)}},stringBuilder:function(){var t;return t=function(t){return 0|(null!=t?t.toString().length:void 0)},function(){var n;return $.is("global",this)?new $.stringBuilder:(n=[],$.extend(this,{length:0,append:function(e){return function(r){return n.push(r),e.length+=t(r)}}(this),prepend:function(e){return function(r){return n.splice(0,0,r),e.length+=t(r)}}(this),clear:function(t){return function(){var e;return e=t.toString(),n=[],t.length=0,e}}(this),toString:function(){return n.join("")}}))}}()},toString:function(){return $.toString(this)},toRepr:function(){return $.toRepr(this)},replace:function(t,n){return this.map(function(e){return e.replace(t,n)})},indexOf:function(t,n){var e,r,i,u;if(null==n&&(n=0),$.is("regexp",t)){for(r=e=i=n,u=this.length;u>e;r=e+=1)if(t.test(this[r]))return r;return-1}return Array.prototype.indexOf.apply(this,arguments)}}}),$.plugin({provides:"symbol",depends:"type"},function(){var t,n,e;return e=null,t={},n=$.global,n.Bling=$,"undefined"!=typeof module&&null!==module&&(module.exports=$),$.defineProperty($,"symbol",{set:function(r){return n[e]=t[e],t[e=r]=n[r],n[r]=Bling},get:function(){return e}}),{$:{symbol:"$",noConflict:function(){return $.symbol="Bling",Bling}}}}),$.plugin({provides:"synth",depends:"StateMachine, type, dom"},function(){var t,n;return t=function(t){function n(){n.__super__.constructor.call(this,n.STATE_TABLE),this.reset()}var e;return extend1(n,t),e={"#":function(){return 2},".":n.goto(3,!0),"[":function(){return 4},'"':function(){return 6},"'":function(){return 7}," ":function(){return 8},"	":function(){return 8},"\n":function(){return 8},"\r":function(){return 8},",":function(){return 10},"+":function(){return 11},eof:function(){return 13}},n.STATE_TABLE=[{enter:function(){return this.tag=this.id=this.cls=this.attr=this.val=this.text="",this.attrs={},1}},$.extend({def:function(t){return this.tag+=t,1}},e),$.extend({def:function(t){return this.id+=t,2}},e),$.extend({enter:function(){return this.cls.length>0&&(this.cls+=" "),3},def:function(t){return this.cls+=t,3}},e),{"=":function(){return 5},"]":function(){return this.attrs[this.attr]=this.val,this.attr=this.val="",1},def:function(t){return this.attr+=t,4},eof:function(){return 12}},{"]":function(){return this.attrs[this.attr]=this.val,this.attr=this.val="",1},def:function(t){return this.val+=t,5},eof:function(){return 12}},{'"':function(){return 8},def:function(t){return this.text+=t,6},eof:function(){return 12}},{"'":function(){return 8},def:function(t){return this.text+=t,7},eof:function(){return 12}},{enter:function(){return this.emitNode(),this.emitText(),0}},{},{enter:function(){return this.emitNode(),this.cursor=null,0}},{enter:function(){var t;return this.emitNode(),this.cursor=null!=(t=this.cursor)?t.parentNode:void 0,0}},{enter:function(){throw new Error("Error in synth expression: "+this.input)}},{enter:function(){return this.emitNode(),this.emitText(),0}}],n.prototype.reset=function(){return this.fragment=this.cursor=document.createDocumentFragment(),this.tag=this.id=this.cls=this.attr=this.val=this.text="",this.attrs={}},n.prototype.emitNode=function(){var t,n;if(this.tag){n=document.createElement(this.tag),this.id&&(n.id=this.id),this.cls&&(n.className=this.cls);for(t in this.attrs)n.setAttribute(t,this.attrs[t]);return this.cursor.appendChild(n),this.cursor=n}},n.prototype.emitText=function(){var t;return(null!=(t=this.text)?t.length:void 0)>0?(this.cursor.appendChild($.type.lookup("<html>").node(this.text)),this.text=""):void 0},n}($.StateMachine),n=new t,{$:{synth:function(t){return n.reset(),n.run(t),$(1===n.fragment.childNodes.length?n.fragment.childNodes[0]:n.fragment)}}}}),$.plugin({depends:"StateMachine, function",provides:"template"},function(){var t,n,e,r;return t=null,n={},r={register_engine:function(e,r){return n[e]=r,null==t?t=e:void 0},render:function(e,r){return t in n?n[t](e,r):void 0}},r.__defineSetter__("engine",function(e){if(!e in n)throw new Error("invalid template engine: "+e+" not one of "+Object.Keys(n));return t=e}),r.__defineGetter__("engine",function(){return t}),r.__defineGetter__("engines",function(){return $.keysOf(n)}),r.register_engine("null",function(){return $.identity}()),e=function(t,n,e,r,i){var u,o,s,a,c,l;for(null==i&&(i=-1),o=1,0>i&&(i=t.length+1+i),s=u=a=r,c=i;c>u;s=u+=1)if(l=t[s],l===e?o+=1:l===n&&(o-=1),0===o)return s;return-1},r.register_engine("pythonic",function(){var t,n,r,i;return i=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/,t=/%[\(\/]/,n=function(n){var r,u,o,s,a,c,l,f,h,p,d;for(u=n.split(t),f=u.length,d=[u[0]],a=1,s=r=1,h=f;h>r;s=r+=1){if(o=e(u[s],")","(",0,-1),-1===o)return"Template syntax error: unmatched '%(' starting at: "+u[s].substring(0,15);if(c=u[s].substring(0,o),p=u[s].substring(o),l=i.exec(p),null===l)return"Template syntax error: invalid type specifier starting at '"+p+"'";p=l[4],d[a++]=c,d[a++]=0|l[1],d[a++]=0|l[2],d[a++]=l[3],d[a++]=p}return d},n.cache={},r=function(t,e){var r,i,u,o,s,a,c,l,f,h,p,d,g,m;for(i=n.cache[t],null==i&&(i=n.cache[t]=n(t)),l=[i[0]],s=1,c=i.length,o=r=1,h=c-5;h>=r;o=r+=5)p=i.slice(o,+(o+4)+1||9e9),a=p[0],f=p[1],u=p[2],g=p[3],d=p[4],m=e[a],null==m&&(m="missing value: "+a),l[s++]=function(){switch(g){case"d":return""+parseInt(m,10);case"f":return parseFloat(m).toFixed(u);case"s":return""+m;default:return""+m}}(),f>0&&(l[s]=$.padLeft(l[s],f)),l[s++]=d;return l.join("")}}()),{$:{template:r}}}),$.plugin({provides:"throttle",depends:"core"},function(){var t,n;return t=function(t,n,e,r,i){return clearTimeout(i),i=setTimeout(function(r){return function(){return t.apply(n,e)}}(this),r)},n=function(t,n,e,r,i){var u;return(u=$.now-i)>r&&(i+=u,t.apply(n,e)),i},{$:{throttle:function(t,e){var r;return r=0,function(){return r=n(e,this,arguments,t,r),null}},debounce:function(n,e){var r;return r=null,function(){var i;return i=arguments,r=t(e,this,arguments,n,r),null}},rate_limit:function(e,r){"rate_limit is a combination of throttle and debounce.\n what we want from a stream throttle is to fire at most every _ms_ and\n then fire one last time after a gap of _ms_ at the end.";var i,u;return i=0,u=null,function(){var o;return o=arguments,u=t(r,this,arguments,e,u),i=n(r,this,arguments,e,i),null}}}}}),$.plugin({provides:"TNET",depends:"type, string, function"},function(){var Types,class_index,classes,makeFunction,packOne,register,reverseLookup,unpackOne;return Types={number:{symbol:"#",pack:String,unpack:Number},string:{symbol:"'",pack:$.identity,unpack:$.identity},bool:{symbol:"!",pack:function(t){return String(!!t)},unpack:function(t){return"true"===t}},null:{symbol:"~",pack:function(){return""},unpack:function(){return null}},undefined:{symbol:"_",pack:function(){return""},unpack:function(){}},array:{symbol:"]",pack:function(t){var n;return function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(packOne(n));return i}().join("")},unpack:function(t){var n,e,r;for(n=[];t.length>0;)r=unpackOne(t),e=r[0],t=r[1],n.push(e);return n}},bling:{symbol:"$",pack:function(t){var n;return function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(packOne(n));return i}().join("")},unpack:function(t){var n,e,r;for(n=$();t.length>0;)r=unpackOne(t),e=r[0],t=r[1],n.push(e);return n}},object:{symbol:"}",pack:function(t){var n,e;return function(){var r;r=[];for(n in t)e=t[n],"constructor"!==n&&t.hasOwnProperty(n)&&r.push(packOne(n)+packOne(e));return r}().join("")},unpack:function(t){var n,e,r,i,u;for(n={};t.length>0;)r=unpackOne(t),e=r[0],t=r[1],i=unpackOne(t),u=i[0],t=i[1],n[e]=u;return n}},function:{symbol:")",pack:function(t){var n,e,r,i,u,o;return o=t.toString().replace(/(?:\n|\r)+\s*/g," "),r="",i=/function\s*(\w+)\(.*/g,i.test(o)&&(r=o.replace(i,"$1")),u=o.replace(/function\s*\w*\(/,"").replace(/\/\*.*\*\//g,"").replace(/}$/,"").split(/\) {/),n=u[0].split(/, */),e=u.slice(1).join(") {").replace(/^\s+/,"").replace(/\s*$/,""),$(r,n,e).map(packOne).join("")},unpack:function(t){var n,e,r,i,u,o,s;return i=unpackOne(t),r=i[0],s=i[1],u=unpackOne(s),n=u[0],s=u[1],o=unpackOne(s),e=o[0],s=o[1],makeFunction(r,n.join(),e)}},regexp:{symbol:"/",pack:function(t){return String(t).slice(1,-1)},unpack:function(t){return RegExp(t)}},"class instance":{symbol:"C",pack:function(t){if(!("constructor"in t))throw new Error("TNET: cant pack non-class as class");if(!(t.constructor in class_index))throw new Error("TNET: cant pack unregistered class (name: "+t.constructor.name);return packOne(class_index[t.constructor])+packOne(t,"object")},unpack:function(t){var n,e,r,i,u;if(r=unpackOne(t),n=r[0],u=r[1],i=unpackOne(u),e=i[0],u=i[1],!(n<=classes.length))throw new Error("TNET: attempt to unpack unregistered class index: "+n);return e.__proto__=classes[n-1].prototype,e}}},makeFunction=function(name,args,body){return eval("var f = function "+name+"("+args+"){"+body+"}"),f},classes=[],class_index={},register=function(t){return class_index[t]||(class_index[t]=classes.push(t))},reverseLookup={},function(){var t,n,e;t=[];for(n in Types)e=Types[n],t.push(reverseLookup[e.symbol]=e);return t}(),unpackOne=function(t){var n,e,r,i,u;return t&&(e=t.indexOf(":"))>0&&(n=parseInt(t.slice(0,e),10),isFinite(n)&&$.is("number",n)&&e<(r=u=e+1+n)&&r<t.length&&(i=reverseLookup[t[u]]))?[i.unpack(t.slice(e+1,u)),t.slice(u+1)]:[void 0,t]},packOne=function(t,n){var e,r,i,u,o,s;if(null!=n?s=n:(s=$.type(t),"unknown"===s&&void 0!==(r=null!=(i=t.constructor)?i.name:void 0)&&"Object"!==r&&(s="class instance")),null==(o=Types[s]))throw new Error("TNET: I don't know how to pack type '"+s+"' ("+(null!=(u=t.constructor)?u.name:void 0)+")");return e=o.pack(t),e.length+":"+e+o.symbol},{$:{TNET:{Types:Types,registerClass:register,stringify:packOne,parse:function(t){var n;return null!=(n=Bling.TNET.parseOne(t))?n[0]:void 0},parseOne:function(t){return Buffer.isBuffer(t)&&(t=t.toString()),unpackOne(t)}}}}}),$.plugin({provides:"trace",depends:"function,type,logger"},function(){var t;return $.type.extend({unknown:{trace:$.identity},object:{trace:function(t,n,e){var r,i,u,o;for(o=Object.keys(n),r=0,u=o.length;u>r;r++)i=o[r],n[i]=$.trace(n[i],t+"."+i,e);return n}},array:{trace:function(t,n,e){var r,i,u;for(i=r=0,u=n.length;u>r;i=r+=1)n[i]=$.trace(n[i],t+"["+i+"]",e);return n}},bling:{trace:function(t,n,e){var r,i,u;for(i=r=0,u=n.length;u>r;i=r+=1)n[i]=$.trace(n[i],t+"["+i+"]",e);return n}},function:{trace:function(t,n,e){var r;return t||(t=n.name),r=function(){var r,i,u,o;return r=1<=arguments.length?slice.call(arguments,0):[],o=+new Date,n.apply(this,r),t=(this.name||$.type(this))+"."+t,i=$(r).map($.toRepr).join(","),u=(+new Date-o).toFixed(0),e(t+"("+i+"): "+u+"ms")},r.toString=function(){return"{Trace '"+t+"' of "+n.toString()},r}}}),t=function(t,n,e){var r,i,u;return $.is("string",t)||(r=[t,n,"trace"],n=r[0],e=r[1],t=r[2]),$.is("function",e)||(e=$.log),u=+new Date,i=n(),e("["+t+"] "+(+new Date-u).toFixed(0)+"ms"),i},{$:{time:t,trace:function(t,n,e){var r;return $.is("string",t)||(r=[n,t],e=r[0],n=r[1]),e||(e=$.log),t||(t=""),$.type.lookup(n).trace(t,n,e)}}}}),$.plugin({depends:"dom"},function(){var t,n,e,r,i,u,o,s,a;return t=", ",e={slow:700,medium:500,normal:300,fast:100,instant:0,now:0},n=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/,a=30,r=document.createElement("div").style,i="transform",o="transition-property",u="transition-duration",s="transition-timing-function","WebkitTransform"in r?(i="-webkit-transform",o="-webkit-transition-property",u="-webkit-transition-duration",s="-webkit-transition-timing-function"):"MozTransform"in r?(i="-moz-transform",o="-moz-transition-property",u="-moz-transition-duration",s="-moz-transition-timing-function"):"OTransform"in r&&(i="-o-transform",o="-o-transition-property",u="-o-transition-duration",s="-o-transition-timing-function"),{$:{duration:function(t){var n;return n=e[t],null!=n?n:parseFloat(t)}},transform:function(e,r,a,c){var l,f,h,p,d,g;$.is("function",r)?(c=r,r=a=null):$.is("function",a)&&(c=a,a=null),null==r&&(r="normal"),a||(a="ease"),f=$.duration(r)+"ms",d=[],g="",l={};for(h in e)n.test(h)?(p=e[h],p.join?p=$(p).px().join(t):p.toString&&(p=p.toString()),g+=" "+h+"("+p+")"):l[h]=e[h];for(h in l)d.push(h);return g&&d.push(i),l[o]=d.join(t),l[u]=d.map(function(){return f}).join(t),l[s]=d.map(function(){return a}).join(t),g&&(l[i]=g),this.css(l),c?this.delay(f,$.bound(this,c)):void 0},hide:function(t){return this.each(function(){return this.style?(this._display="",this.style.display===!1&&(this._display=this.syle.display),this.style.display="none"):void 0}).trigger("hide"),t&&this.delay(a,$.bound(this,t)),this},show:function(t){return this.each(function(){return this.style?(this.style.display=this._display,delete this._display):void 0}).trigger("show"),t&&this.delay(a,$.bound(this,t)),this},toggle:function(t){return this.weave(this.css("display")).fold(function(t,n){return"none"===t?(n.style.display=n._display||"",delete n._display,$(n).trigger("show")):(n._display=t,n.style.display="none",$(n).trigger("hide")),n}).delay(a,$.bound(this,t))},fadeIn:function(t,n){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},t,n)})},fadeOut:function(t,n,e,r){return null==e&&(e=0),null==r&&(r=0),this.transform({opacity:"0.0",translate3d:[e,r,0]},t,function(){return this.hide($.bound(this,n))})},fadeLeft:function(t,n){return this.fadeOut(t,n,"-"+this.width().first(),0)},fadeRight:function(t,n){return this.fadeOut(t,n,this.width().first(),0)},fadeUp:function(t,n){return this.fadeOut(t,n,0,"-"+this.height().first())},fadeDown:function(t,n){return this.fadeOut(t,n,0,this.height().first())}}}),$.plugin({provides:"type,is,inherit,extend,defineProperty,isType,are,as,isSimple,isDefined,isEmpty",depends:"compat"},function(){var t,n,e,r,i;return t=Object.prototype.toString,r=function(n,e){return null==e?n===e||"null"===n||"undefined"===n:null!=e.constructor&&(e.constructor===n||e.constructor.name===n)||t.apply(e)==="[object "+n+"]"||r(n,e.__proto__)},e=function(){var t,n,r,i;return r=arguments[0],n=2<=arguments.length?slice.call(arguments,1):[],n.length>0?(t=n.shift(),"function"==typeof r&&(r=r.prototype),((i=r.__proto__)===Object.prototype||null===i||void 0===i)&&(r.__proto__=t.__proto__),t.__proto__=r,n.length>0?e.apply(null,[t].concat(slice.call(n))):t):void 0},n=function(){var t,n,i,u,o,s,a,c;return o={},u={name:"unknown",is:function(){return!0}},a=[],n={},i=function(t,e){var r,i;return r=n[t]||(n[t]=[]),-1===(i=r.indexOf(e))?r.push(e):void 0},c=function(n,r){var s;if(r.is||(r.is=function(){return!1}),n in o)return t(n,r);n in o||a.unshift(n),o[r.name=n]=u!==r?e(u,r):r,o[n][n]=function(t){return t};for(s in o[n])i(s,o[n]);return o[n]},t=function(n,e){var r,u;if("string"==typeof n){o[n]||(o[n]=c(n,{})),o[n]=extend(o[n],e);for(u in e)i(u,o[n])}else if("object"==typeof n)for(r in n)t(r,n[r]);return null},s=function(t){var n,e,r;for(n=0,e=a.length;e>n;n++)if(r=a[n],o[r].is.call(t,t))return o[r];return null},c("unknown",u),c("object",{is:function(t){var n,e;return null!=t&&"object"==typeof t&&(void 0===(n=null!=(e=t.constructor)?e.name:void 0)||"Object"===n)}}),c("array",{is:Array.isArray||function(t){return r(Array,t)}}),c("buffer",{is:$.global.Buffer.isBuffer||function(){return!1}}),c("error",{is:function(t){return r("Error",t)}}),c("regexp",{is:function(t){return r("RegExp",t)}}),c("string",{is:function(t){return"string"==typeof t}}),c("number",{is:function(t){return"number"==typeof t&&!isNaN(t)}}),c("bool",{is:function(t){return"boolean"==typeof t}}),c("function",{is:function(t){return"function"==typeof t}}),c("global",{is:function(t){return"object"==typeof t&&"setInterval"in t}}),c("arguments",{is:function(t){return"object"==typeof t&&"callee"in t&&"length"in t}}),c("undefined",{is:function(t){return void 0===t}}),c("null",{is:function(t){return null===t}}),extend(function(t){return s(t).name},{register:c,lookup:s,extend:t,get:function(t){return o[t]},is:function(t,n){var e,r;return null!=(e=null!=(r=o[t])?r.is.call(n,n):void 0)?e:!1},as:function(){var t,n,e,r;return r=arguments[0],n=arguments[1],e=3<=arguments.length?slice.call(arguments,2):[],"function"==typeof(t=s(n))[r]?t[r].apply(t,[n].concat(slice.call(e))):void 0},with:function(t){var e;return null!=(e=n[t])?e:[]}})}(),n.extend({unknown:{array:function(t){return[t]}},null:{array:function(){return[]}},undefined:{array:function(){return[]}},array:{array:function(t){return t}},number:{array:function(t){return $.extend(new Array(t),{length:0})}},arguments:{array:function(t){return Array.prototype.slice.apply(t)}}}),i=4294967295,n.register("bling",{is:function(t){return t&&r($,t)},array:function(t){return t&&t.toArray()||[]},hash:function(t){return t.map($.hash).reduce(function(t,n){return(t*t+n)%i})},string:function(t){return $.symbol+"(["+t.map(function(t){return $.type.lookup(t).string(t)}).join(", ")+"])"},repr:function(t){return $.symbol+"(["+t.map(function(t){return $.type.lookup(t).repr(t)}).join(", ")+"])"}}),n.in=function(){var t,n,e,r,i,u;for(u=2<=arguments.length?slice.call(arguments,0,t=arguments.length-1):(t=0,[]),r=arguments[t++],n=0,e=u.length;e>n;n++)if(i=u[n],$.is(i,r))return!0;return!1},{$:{inherit:e,extend:extend,defineProperty:function(t,n,e){return Object.defineProperty(t,n,extend({configurable:!0,enumerable:!0},e)),t},isType:r,type:n,is:n.is,are:function(){var t,n,e,r,i;for(i=arguments[0],e=2<=arguments.length?slice.call(arguments,1):[],n=0,r=e.length;r>n;n++)if(t=e[n],!$.is(i,t))return!1;return!0},as:n.as,isDefined:function(t){return null!=t},isSimple:function(t){return n.in("string","number","bool",t)},isEmpty:function(t){return""===t||null===t||void 0===t||0===t.length||"object"==typeof t&&0===Object.keys(t).length}},defineProperty:function(t,n){return this.each(function(){return $.defineProperty(this,t,n)})}}}),$.plugin({depends:"math",provides:"units"},function(){var t,n,e,r,i,u,o,s,a,c;return c=$(["px","pt","pc","em","%","in","cm","mm","ex","lb","kg","yd","ft","m",""]),t=null,(o=function(){var n;return n=c.filter(/.+/).join("|"),t=new RegExp("(\\d+\\.*\\d*)((?:"+n+")/*(?:"+n+")*)$")})(),s=function(n){return t.test(n)?t.exec(n)[2]:""},n=function(t,e){var r,i,u,o,s,a;return s=t.split("/"),u=s[0],r=s[1],a=e.split("/"),o=a[0],i=a[1],null!=r&&null!=i?n(i,r)*n(u,o):t in n&&e in n[t]?n[t][e]():0},u=function(t){return function(){return t}},r=function(){},a=function(t,e,i){return n[t]||(n[t]={}),n[t][e]=i,-1===c.indexOf(t)&&c.push(t),-1===c.indexOf(e)&&c.push(e),o(),r()},i=function(){return $.type.register("units",{is:function(n){return"string"==typeof n&&t.test(n)},number:function(t){return parseFloat(t)},string:function(t){return"'"+t+"'"}}),a("pc","pt",function(){return 12}),a("in","pt",function(){return 72}),a("in","px",function(){return 96}),a("in","cm",function(){return 2.54}),a("m","ft",function(){return 3.281}),a("yd","ft",function(){return 3}),a("cm","mm",function(){return 10}),a("m","cm",function(){return 100}),a("m","meter",function(){return 1}),a("m","meters",function(){return 1}),a("ft","feet",function(){return 1}),a("km","m",function(){return 1e3}),a("em","px",function(){var t,n;t=0;try{n=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body"),t=n.width().first(),n.remove()}catch(t){}return t}),a("ex","px",function(){var t,n;t=0;try{n=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body"),t=n.width().first(),n.remove()}catch(t){}return t}),a("ex","em",function(){return 2}),a("rad","deg",function(){return 57.3}),a("s","sec",function(){return 1}),a("s","ms",function(){return 1e3}),a("ms","ns",function(){return 1e6}),a("min","sec",function(){return 60}),a("hr","min",function(){return 60}),a("hr","hour",function(){return 1}),a("hr","hours",function(){return 1}),a("day","hr",function(){return 24}),a("day","days",function(){return 1}),a("y","year",function(){return 1}),a("y","years",function(){return 1}),a("y","d",function(){return 365.25}),a("g","gram",function(){return 1}),a("g","grams",function(){return 1}),a("kg","g",function(){return 1e3}),a("lb","g",function(){return 453.6}),a("lb","oz",function(){return 16}),a("f","frame",function(){return 1}),a("f","frames",function(){return 1}),a("sec","f",function(){return 60}),(r=function(){var t,e,r,i,o,s,a,l,f,h,p,d,g;for(n[""]={},g=u(1),e=0,f=c.length;f>e;e++)t=c[e],n[t]||(n[t]={}),n[t][t]=n[t][""]=n[""][t]=g;for(l=1;l>0;)for(l=0,r=0,h=c.length;h>r;r++)if(t=c[r],""!==t)for(n[t]||(n[t]={}),i=0,p=c.length;p>i;i++)if(s=c[i],""!==s)for(!n(t,s)&&n(s,t)&&(n[t][s]=u(1/n(s,t)),l+=1),o=0,d=c.length;d>o;o++)a=c[o],""!==a&&n(t,s)&&n(s,a)&&!n(t,a)&&(n[t][a]=u(n(t,s)*n(s,a)),l+=1);return null})(),$.units.enable=function(){}},e=function(t,e){var r,i,u;return i=parseFloat(e),u=s(e),r=n(u,t),isFinite(r)&&isFinite(i)?""+i*r+t:e},{$:{units:{enable:i,set:a,get:n,convertTo:e}},convertTo:function(t){return this.map(function(n){return e(t,n)})},unitMap:function(t){return this.map(function(n){var e;return t.call(e=parseFloat(n),e)+s(n)})}}}),$.plugin({depends:"type",provides:"url,URL"},function(){var t,n,e,r,i,u,o,s;return u=/\b(?:([a-z+]+):)(?:\/{1,2}([^?\/#]*?))(\/[^?]*)*(?:\?([^#]+))*(?:#([^\s]+))*$/i,o=/^([^:]+):([^@]+)@/,s=/^([^:@]+)@/,n=/^([^:]+):(\d+)/,r=function(t){var e,i;return null!=t&&t.length>0?(i={host:t},i.host.indexOf(",")>-1?$.extend(i,{hosts:i.host.split(",").map(r),host:void 0}):((e=i.host.match(o))?$.extend(i,{username:e[1],password:e[2],host:i.host.replace(o,"")}):(e=i.host.match(s))&&$.extend(i,{username:e[1],host:i.host.replace(s,"")}),(e=i.host.match(n))&&$.extend(i,{host:e[1],port:e[2]})),i):{}},e=function(t,n){var e,i,o,s,a,c,l,f,h,p,d;if(null==n&&(n=!1),d=(s=null!=t?t.match(u):void 0)?{protocol:s[1],host:s[2],path:s[3],query:null!=(l=s[4])?l.replace(/^\?/,""):void 0,hash:null!=(f=s[5])?f.replace(/^#/,""):void 0}:null,null!=d){if(n){for(c=null!=(h=d.query)?h:"",d.query=Object.create(null),p=c.split("&"),e=0,o=p.length;o>e;e++)a=p[e],(i=a.indexOf("="))>-1?d.query[a.substring(0,i)]=unescape(a.substring(i+1)):a.length>0&&(d.query[a]=null);delete d.query[""];
}$.extend(d,r(d.host)),$.keysOf(d).each(function(t){switch($.type(d[t])){case"null":case"undefined":delete d[t];break;case"string":0===d[t].length&&delete d[t]}return null})}return d},t=function(t,n,e,r){var i;return null==e&&(e=""),null==r&&(r=""),i=null!=t?t:"",i&&!n.test(i)?e+i+r:i},i=function(n){var e,r;return $.is("object",n.query)&&(n.query=function(){var t,i;t=n.query,i=[];for(e in t)r=t[e],i.push(e+"="+r);return i}().join("&")),[t(n.protocol,/:$/,"",":"),t(n.host,/^\//,"//"),t(n.port,/^:/,":"),t(n.path,/^\//,"/"),t(n.query,/^\?/,"?"),t(n.hash,/^#/,"#")].join("")},{$:{URL:{parse:e,stringify:i}}}}),$.plugin({provides:"watchProperty",depends:"type"},function(){var t,n,e,r,i;return t="change",e="insert",n="delete",i=function(n,e,u,o){var s,a,c,l,f;return null==o&&(o=""),"string"==typeof e&&(c=e.indexOf("."))>-1?(s=e.substr(0,c),i(n[s],e.substr(c+1),u,(null!=o?o.length:void 0)&&o+"."+s||s)):($.is("array",n[e])&&r(n[e],u,(null!=o?o.length:void 0)&&o+"."+e||e),l=Object.getOwnPropertyDescriptor(n,e),$.defineProperty(n,e,{get:a=null!=(f=l.get)?f:function(){return l.value},set:$.compose($.partial(u,t,(null!=o?o.length:void 0)&&o+"."+e||e),l.set||l.writable&&function(t){return l.value=t}||a)}))},r=function(t,r,u){var o,s,a;return null==u&&(u=""),s=function(t,n,e){return r(t,(null!=u?u.length:void 0)&&u+"."+n||n,e)},o=function(n,e){var r;return r=t[n],t[n]=function(){var n;n=1<=arguments.length?slice.call(arguments,0):[];try{return r.apply(t,n)}finally{e.apply(t,n)}}},(a=function(){var n,e,r;for(e=n=0,r=t.length;r>n;e=n+=1)i(t,e,s);return null})(),o("push",function(t){var n;return n=this.length-1,i(this,n,s),s(e,n,t)}),o("unshift",function(t){return a(),s(e,0,t)}),o("pop",function(){return s(n,this.length,1)}),o("shift",function(){return a(),s(n,this.length,1)}),o("splice",function(t,e,r){return void 0!==r?(t+=1,e-=1):e>0&&(t=this.length),e>0?s(n,t,e):void 0}),t},{$:{watchProperty:i}}})}).call(this);
//# sourceMappingURL=bling.min.js.map